(function(){var t,e,n,s={}.hasOwnProperty,r=function(t,i){return function(){return t.apply(i,arguments)}},o=function(t,i){for(var e in i){if(s.call(i,e))t[e]=i[e]}function n(){this.constructor=t}n.prototype=i.prototype;t.prototype=new n;t.__super__=i.prototype;return t};n=window||this;n.Bu=function(){return function(t,i,e){e.prototype=t.prototype;var n=new e,s=t.apply(n,i);return Object(s)===s?s:n}(Bu.Renderer,arguments,function(){})};Bu.global=n;Bu.VERSION="0.3.2";Bu.DEFAULT_STROKE_STYLE="#048";Bu.DEFAULT_FILL_STYLE="rgba(64, 128, 192, 0.5)";Bu.DEFAULT_DASH_STYLE=[8,4];Bu.DEFAULT_SPLINE_SMOOTH=.25;Bu.DEFAULT_STROKE_STYLE_HOVER="rgba(255, 128, 0, 0.75)";Bu.DEFAULT_FILL_STYLE_HOVER="rgba(255, 128, 128, 0.5)";Bu.DEFAULT_TEXT_FILL_STYLE="black";Bu.DEFAULT_IMAGE_SIZE=20;Bu.POINT_RENDER_SIZE=2.25;Bu.POINT_LABEL_OFFSET=5;Bu.DEFAULT_BOUND_STROKE_STYLE="#444";Bu.DEFAULT_BOUND_DASH_STYLE=[6,6];Bu.DEFAULT_NEAR_DIST=5;Bu.MOUSE_BUTTON_NONE=-1;Bu.MOUSE_BUTTON_LEFT=0;Bu.MOUSE_BUTTON_MIDDLE=1;Bu.MOUSE_BUTTON_RIGHT=2;Bu.average=function(){var t,i,e,n,s;n=arguments;if(typeof arguments[0]==="object"){n=arguments[0]}s=0;for(i=0,e=n.length;i<e;i++){t=n[i];s+=t}return s/n.length};Bu.bevel=function(t,i){return Math.sqrt(t*t+i*i)};Bu.rand=function(t,i){if(i==null){i=t;t=0}return Math.random()*(i-t)+t};Bu.r2d=function(t){return(t*180/Math.PI).toFixed(1)};Bu.d2r=function(t){return t*Math.PI/180};Bu.now=(typeof window!=="undefined"&&window!==null?window.performance:void 0)!=null?function(){return window.performance.now()}:function(){return Date.now()};Bu.combineOptions=function(t,i){var e,n;if(i==null){i={}}e=t[t.length-1];if(typeof e==="object"){for(n in e){i[n]=e[n]}}return i};Bu.clone=function(t,i){var e,n,r,o;if(i==null){i=false}if(t instanceof Array){e=[];r=[];for(n in t){if(!s.call(t,n))continue;r.push(e[n]=t[n])}return r}else if(t instanceof Object){e={};o=[];for(n in t){if(!s.call(t,n))continue;o.push(e[n]=t[n])}return o}};Bu.data=function(t,i){if(i!=null){return localStorage["Bu."+t]=JSON.stringify(i)}else{i=localStorage["Bu."+t];if(i!=null){return JSON.parse(i)}else{return null}}};Function.prototype.property=function(t,i){return Object.defineProperty(this.prototype,t,i)};Function.prototype.throttle=function(t){var i,e;if(t==null){t=.5}i=0;e=0;return function(n){return function(){i=Date.now();if(i-e>t*1e3){n.apply(null,arguments);return e=i}}}(this)};Function.prototype.debounce=function(t){var i,e,n;if(t==null){t=.5}i=null;n=null;e=function(t){return function(){return t.apply(null,i)}}(this);return function(){i=arguments;clearTimeout(n);return n=setTimeout(e,t*1e3)}};(t=Array.prototype).each||(t.each=function(t){var i;i=0;while(i<this.length){t(this[i]);i++}return this});(e=Array.prototype).map||(e.map=function(t){var i,e;i=[];e=0;while(e<this.length){i.push(t(this[e]));e++}return this});Bu.Vector=function(){function t(t,i){this.x=t!=null?t:0;this.y=i!=null?i:0}t.prototype.set=function(t,i){this.x=t;this.y=i};return t}();Bu.Size=function(){function t(t,i){this.width=t;this.height=i;this.type="Size"}t.prototype.set=function(t,i){this.width=t;return this.height=i};return t}();Bu.Bounds=function(){function t(t){var i,e,n,s,r,o,h;this.target=t;this.x1=this.y1=this.x2=this.y2=0;this.isEmpty=true;this.point1=new Bu.Vector;this.point2=new Bu.Vector;this.strokeStyle=Bu.DEFAULT_BOUND_STROKE_STYLE;this.dashStyle=Bu.DEFAULT_BOUND_DASH_STYLE;this.dashOffset=0;switch(this.target.type){case"Line":case"Triangle":case"Rectangle":r=this.target.points;for(i=0,e=r.length;i<e;i++){h=r[i];this.expandByPoint(h)}break;case"Circle":case"Bow":case"Fan":this.expandByCircle(this.target);this.target.on("centerChanged",function(t){return function(){t.clear();return t.expandByCircle(t.target)}}(this));this.target.on("radiusChanged",function(t){return function(){t.clear();return t.expandByCircle(t.target)}}(this));break;case"Polyline":case"Polygon":o=this.target.vertices;for(s=0,n=o.length;s<n;s++){h=o[s];this.expandByPoint(h)}break;default:console.warn('Bounds: not support shape type "'+this.target.type+'"')}}t.prototype.containsPoint=function(t){return this.x1<t.x&&this.x2>t.x&&this.y1<t.y&&this.y2>t.y};t.prototype.clear=function(){this.x1=this.y1=this.x2=this.y2=0;return this.isEmpty=true};t.prototype.expandByPoint=function(t){if(this.isEmpty){this.isEmpty=false;this.x1=this.x2=t.x;return this.y1=this.y2=t.y}else{if(t.x<this.x1){this.x1=t.x}if(t.x>this.x2){this.x2=t.x}if(t.y<this.y1){this.y1=t.y}if(t.y>this.y2){return this.y2=t.y}}};t.prototype.expandByCircle=function(t){var i,e;i=t.center;e=t.radius;if(this.isEmpty){this.isEmpty=false;this.x1=i.x-e;this.x2=i.x+e;this.y1=i.y-e;return this.y2=i.y+e}else{if(i.x-e<this.x1){this.x1=i.x-e}if(i.x+e>this.x2){this.x2=i.x+e}if(i.y-e<this.y1){this.y1=i.y-e}if(i.y+e>this.y2){return this.y2=i.y+e}}};return t}();Bu.Event=function(){var t;t={};this.on=function(i,e){var n;n=t[i]||(t[i]=[]);if(n.indexOf(e===-1)){return n.push(e)}};this.once=function(t,i){i.once=true;return this.on(t,i)};this.off=function(i,e){var n,s;s=t[i];if(e!=null){if(s!=null){n=s.indexOf(e);if(n>-1){return s.splice(n,1)}}}else{if(s!=null){return s.length=0}}};return this.trigger=function(e,n){var s,r,o,h,u;h=t[e];if(h!=null){n||(n={});n.target=this;u=[];for(s=0,r=h.length;s<r;s++){o=h[s];o.call(this,n);if(o.once){h.splice(i,1);u.push(i-=1)}else{u.push(void 0)}}return u}}};(function(t){var i;t.$=function(t){var e;e=[];if(typeof t==="string"){e=[].slice.call(document.querySelectorAll(t))}i.apply(e);return e};i=function(){var t;this.on=function(t){return function(i,e){t.each(function(t){return t.addEventListener(i,e)});return t}}(this);this.off=function(t){return function(i,e){t.each(function(t){return t.removeEventListener(i,e)});return t}}(this);t="svg line rect circle ellipse polyline polygon path text";this.append=function(i){return function(e){i.each(function(n,s){var r,o;o=t.indexOf(e.toLowerCase());if(o>-1){r=document.createElementNS("http://www.w3.org/2000/svg",e)}else{r=document.createElement(e)}return i[s]=n.appendChild(r)});return i}}(this);this.text=function(t){return function(i){t.each(function(t){return t.textContent=i});return t}}(this);this.html=function(t){return function(i){t.each(function(t){return t.innerHTML=i});return t}}(this);this.style=function(t){return function(i,e){t.each(function(t){var n,s,r;s=t.getAttribute("style");r={};if(s){s.split(";").each(function(t){var i;i=t.split(":");return r[i[0]]=i[1]})}r[i]=e;s="";for(n in r){s+=n+": "+r[n]+"; "}return t.setAttribute("style",s)});return t}}(this);this.hasClass=function(t){return function(i){var e,n,s;if(t.length===0){return false}s=0;while(s<t.length){e=t[s].getAttribute("class"||"");n=e.split(RegExp(" +"));if(!n.contains(i)){return false}s++}return t}}(this);this.addClass=function(t){return function(i){t.each(function(t){var e,n;e=t.getAttribute("class"||"");n=e.split(RegExp(" +"));if(!n.contains(i)){n.push(i);return t.setAttribute("class",n.join(" "))}});return t}}(this);this.removeClass=function(t){return function(i){t.each(function(t){var e,n;e=t.getAttribute("class")||"";n=e.split(RegExp(" +"));if(n.contains(i)){n.remove(i);if(n.length>0){return t.setAttribute("class",n.join(" "))}else{return t.removeAttribute("class")}}});return t}}(this);this.toggleClass=function(t){return function(i){t.each(function(t){var e,n;e=t.getAttribute("class"||"");n=e.split(RegExp(" +"));if(n.contains(i)){n.remove(i)}else{n.push(i)}if(n.length>0){return t.setAttribute("class",n.join(" "))}else{return t.removeAttribute("class")}});return t}}(this);this.attr=function(t){return function(i,e){if(e!=null){t.each(function(t){return t.setAttribute(i,e)});return t}else{return t[0].getAttribute(i)}}}(this);this.hasAttr=function(t){return function(i){var e;if(t.length===0){return false}e=0;while(e<t.length){if(!t[e].hasAttribute(i)){return false}e++}return t}}(this);this.removeAttr=function(t){return function(i){t.each(function(t){return t.removeAttribute(i)});return t}}(this);return this.val=function(t){return function(){var i;return(i=t[0])!=null?i.value:void 0}}(this)};t.$.ready=function(t){return document.addEventListener("DOMContentLoaded",t)};return t.$.ajax=function(t,i){var e;if(!i){if(typeof t==="object"){i=t;t=i.url}else{i={}}}i.method||(i.method="GET");if(i.async==null){i.async=true}e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===4){if(e.status===200){if(i.success!=null){return i.success(e.responseText,e.status,e)}}else{if(i.error!=null){i.error(e,e.status)}if(i.complete!=null){return i.complete(e,e.status)}}}};e.open(i.method,t,i.async,i.username,i.password);return e.send(null)}})(window||this);Bu.Object2D=function(){function t(){Bu.Colorful.apply(this);Bu.Event.apply(this);this.visible=true;this.opacity=1;this.translate=new Bu.Vector;this.rotation=0;this._scale=new Bu.Vector(1,1);this.skew=new Bu.Vector;this.bounds=null;this.keyPoints=null;this.children=[];this.parent=null}t.property("scale",{get:function(){return this._scale},set:function(t){if(typeof t==="number"){return this._scale.x=this._scale.y=t}else{return this.scale=t}}});t.prototype.animate=function(t,i){var e,n;if(typeof t==="string"){if(t in Bu.animations){return Bu.animations[t].apply(this,i)}else{return console.warn('Bu.animations["'+t+"\"] doesn't exists.")}}else if(t instanceof Array){if(!(i instanceof Array)){i=[i]}n=[];for(e in t){if(!s.call(t,e))continue;n.push(this.animate(t[e],i))}return n}else{return t.apply(this,i)}};t.prototype.containsPoint=function(t){if(this.bounds!=null&&!this.bounds.containsPoint(t)){return false}else if(this._containsPoint){return this._containsPoint(t)}else{return false}};return t}();Bu.Colorful=function(){this.strokeStyle=Bu.DEFAULT_STROKE_STYLE;this.fillStyle=Bu.DEFAULT_FILL_STYLE;this.dashStyle=false;this.lineWidth=1;this.dashOffset=0;this.stroke=function(t){if(t==null){t=true}switch(t){case true:this.strokeStyle=Bu.DEFAULT_STROKE_STYLE;break;case false:this.strokeStyle=null;break;default:this.strokeStyle=t}return this};this.fill=function(t){if(t==null){t=true}switch(t){case false:this.fillStyle=null;break;case true:this.fillStyle=Bu.DEFAULT_FILL_STYLE;break;default:this.fillStyle=t}return this};return this.dash=function(t){if(t==null){t=true}if(typeof t==="number"){t=[t,t]}switch(t){case false:this.dashStyle=null;break;case true:this.dashStyle=Bu.DEFAULT_DASH_STYLE;break;default:this.dashStyle=t}return this}};Bu.Renderer=function(){function t(){this.drawShape=r(this.drawShape,this);this.drawShapes=r(this.drawShapes,this);var t,i,e,n;Bu.Event.apply(this);this.type="Renderer";i=Bu.combineOptions(arguments,{width:800,height:600,fps:60,fillParent:false,showKeyPoints:false,border:false});this.width=i.width;this.height=i.height;this.fps=i.fps;this.container=i.container;this.fillParent=i.fillParent;this.isShowKeyPoints=i.showKeyPoints;this.tickCount=0;this.isRunning=false;this.pixelRatio=(typeof window!=="undefined"&&window!==null?window.devicePixelRatio:void 0)||1;this.dom=document.createElement("canvas");this.context=this.dom.getContext("2d");this.context.textBaseline="top";if(typeof ClipMeter!=="undefined"&&ClipMeter!==null){this.clipMeter=new ClipMeter}this.shapes=[];if(!this.fillParent){this.dom.style.width=this.width+"px";this.dom.style.height=this.height+"px";this.dom.width=this.width*this.pixelRatio;this.dom.height=this.height*this.pixelRatio}if(i.border!=null&&i.border){this.dom.style.border="solid 1px gray"}this.dom.style.cursor="crosshair";this.dom.style.boxSizing="content-box";this.dom.style.background="#eee";this.dom.oncontextmenu=function(){return false};window.canvas=this.dom;if((e=Bu.animationRunner)!=null){e.hookUp(this)}t=function(t){return function(){var i,e,n,s;i=t.dom.height/t.dom.width;e=t.container.clientHeight/t.container.clientWidth;if(e<i){n=t.container.clientHeight;s=n/e}else{s=t.container.clientWidth;n=s*e}t.width=t.dom.width=s*t.pixelRatio;t.height=t.dom.height=n*t.pixelRatio;t.dom.style.width=s+"px";t.dom.style.height=n+"px";return t.render()}}(this);if(this.fillParent){window.addEventListener("resize",t);this.dom.addEventListener("DOMNodeInserted",t)}n=function(t){return function(){if(t.isRunning){if(t.clipMeter!=null){t.clipMeter.start()}t.render();t.trigger("update",{tickCount:t.tickCount});t.tickCount+=1;if(t.clipMeter!=null){t.clipMeter.tick()}}return requestAnimationFrame(n)}}(this);n();if(this.container!=null){if(typeof this.container==="string"){this.container=document.querySelector(this.container)}setTimeout(function(t){return function(){return t.container.appendChild(t.dom)}}(this),100)}this.isRunning=true}t.prototype.pause=function(){return this.isRunning=false};t.prototype["continue"]=function(){return this.isRunning=true};t.prototype.toggle=function(){return this.isRunning=!this.isRunning};t.prototype.append=function(t){var i,e,n;if(t instanceof Array){for(i=0,e=t.length;i<e;i++){n=t[i];this.shapes.push(n)}}else{this.shapes.push(t)}return this};t.prototype.render=function(){this.context.save();this.context.scale(this.pixelRatio,this.pixelRatio);this.clearCanvas();this.drawShapes(this.shapes);this.context.restore();return this};t.prototype.clearCanvas=function(){this.context.clearRect(0,0,this.width,this.height);return this};t.prototype.drawShapes=function(t){var i,e,n;if(t!=null){for(i=0,e=t.length;i<e;i++){n=t[i];this.context.save();this.drawShape(n);this.context.restore()}}return this};t.prototype.drawShape=function(t){var i,e,n;if(!t.visible){return this}this.context.translate(t.translate.x,t.translate.y);this.context.rotate(t.rotation);e=t.scale.x;n=t.scale.y;if(e/n>100||e/n<.01){if(Math.abs(e)<.02){e=0}if(Math.abs(n)<.02){n=0}}this.context.scale(e,n);this.context.globalAlpha*=t.opacity;if(t.strokeStyle!=null){this.context.strokeStyle=t.strokeStyle;this.context.lineWidth=t.lineWidth;if(t.lineCap!=null){this.context.lineCap=t.lineCap}if(t.lineJoin!=null){this.context.lineJoin=t.lineJoin}}this.context.beginPath();switch(t.type){case"Point":this.drawPoint(t);break;case"Line":this.drawLine(t);break;case"Circle":this.drawCircle(t);break;case"Triangle":this.drawTriangle(t);break;case"Rectangle":this.drawRectangle(t);break;case"Fan":this.drawFan(t);break;case"Bow":this.drawBow(t);break;case"Polygon":this.drawPolygon(t);break;case"Polyline":this.drawPolyline(t);break;case"Spline":this.drawSpline(t);break;case"PointText":this.drawPointText(t);break;case"Image":this.drawImage(t);break;case"Bounds":this.drawBounds(t);break;default:console.log("drawShapes(): unknown shape: ",t)}if(t.fillStyle!=null){this.context.fillStyle=t.fillStyle;this.context.fill()}if(t.dashStyle){this.context.lineDashOffset=t.dashOffset;if(typeof(i=this.context).setLineDash==="function"){i.setLineDash(t.dashStyle)}this.context.stroke();this.context.setLineDash([])}else if(t.strokeStyle!=null){this.context.stroke()}if(t.children!=null){this.drawShapes(t.children)}if(this.isShowKeyPoints){this.drawShapes(t.keyPoints)}return this};t.prototype.drawPoint=function(t){this.context.arc(t.x,t.y,Bu.POINT_RENDER_SIZE,0,Math.PI*2);return this};t.prototype.drawLine=function(t){this.context.moveTo(t.points[0].x,t.points[0].y);this.context.lineTo(t.points[1].x,t.points[1].y);return this};t.prototype.drawCircle=function(t){this.context.arc(t.cx,t.cy,t.radius,0,Math.PI*2);return this};t.prototype.drawTriangle=function(t){this.context.lineTo(t.points[0].x,t.points[0].y);this.context.lineTo(t.points[1].x,t.points[1].y);this.context.lineTo(t.points[2].x,t.points[2].y);this.context.closePath();return this};t.prototype.drawRectangle=function(t){if(t.cornerRadius!==0){return this.drawRoundRectangle(t)}this.context.rect(t.position.x,t.position.y,t.size.width,t.size.height);return this};t.prototype.drawRoundRectangle=function(t){var i,e,n,s,r,o;n=t.position.x;s=t.pointRB.x;r=t.position.y;o=t.pointRB.y;e=t.cornerRadius;this.context.moveTo(n,r+e);this.context.arcTo(n,r,n+e,r,e);this.context.lineTo(s-e,r);this.context.arcTo(s,r,s,r+e,e);this.context.lineTo(s,o-e);this.context.arcTo(s,o,s-e,o,e);this.context.lineTo(n+e,o);this.context.arcTo(n,o,n,o-e,e);this.context.closePath();if(t.strokeStyle!=null&&t.dashStyle){if(typeof(i=this.context).setLineDash==="function"){i.setLineDash(t.dashStyle)}}return this};t.prototype.drawFan=function(t){this.context.arc(t.cx,t.cy,t.radius,t.aFrom,t.aTo);this.context.lineTo(t.cx,t.cy);this.context.closePath();return this};t.prototype.drawBow=function(t){this.context.arc(t.cx,t.cy,t.radius,t.aFrom,t.aTo);this.context.closePath();return this};t.prototype.drawPolygon=function(t){var i,e,n,s;s=t.vertices;for(i=0,e=s.length;i<e;i++){n=s[i];this.context.lineTo(n.x,n.y)}this.context.closePath();return this};t.prototype.drawPolyline=function(t){var i,e,n,s;s=t.vertices;for(i=0,e=s.length;i<e;i++){n=s[i];this.context.lineTo(n.x,n.y)}return this};t.prototype.drawSpline=function(t){var i,e,n,s;if(t.strokeStyle!=null){n=t.vertices.length;if(n===2){this.context.moveTo(t.vertices[0].x,t.vertices[0].y);this.context.lineTo(t.vertices[1].x,t.vertices[1].y)}else if(n>2){this.context.moveTo(t.vertices[0].x,t.vertices[0].y);for(i=e=1,s=n-1;1<=s?e<=s:e>=s;i=1<=s?++e:--e){this.context.bezierCurveTo(t.controlPointsBehind[i-1].x,t.controlPointsBehind[i-1].y,t.controlPointsAhead[i].x,t.controlPointsAhead[i].y,t.vertices[i].x,t.vertices[i].y)}}}return this};t.prototype.drawPointText=function(t){this.context.textAlign=t.textAlign;this.context.textBaseline=t.textBaseline;this.context.font=t.font;if(t.strokeStyle!=null){this.context.strokeText(t.text,t.x,t.y)}if(t.fillStyle!=null){this.context.fillStyle=t.fillStyle;this.context.fillText(t.text,t.x,t.y)}return this};t.prototype.drawImage=function(t){var i,e,n,s;if(t.loaded){s=t.size.width;n=t.size.height;i=-s*t.pivot.x;e=-n*t.pivot.y;this.context.drawImage(t.image,i,e,s,n)}return this};t.prototype.drawBounds=function(t){this.context.rect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1);return this};return t}();Bu.Point=function(t){var i;o(e,t);function e(t,i){this.x=t!=null?t:0;this.y=i!=null?i:0;e.__super__.constructor.call(this);this.type="Point";this.lineWidth=.5;this._labelIndex=-1}e.prototype.clone=function(){return new Bu.Point(this.x,this.y)};e.property("label",{get:function(){if(this._labelIndex>-1){return this.children[this._labelIndex].text}else{return""}},set:function(t){var i;if(this._labelIndex===-1){i=new Bu.PointText(t,this.x+Bu.POINT_LABEL_OFFSET,this.y,{align:"+0"});this.children.push(i);return this._labelIndex=this.children.length-1}else{return this.children[this._labelIndex].text=t}}});e.prototype.arcTo=function(t,i){return new Bu.Point(this.x+Math.cos(i)*t,this.y+Math.sin(i)*t)};e.prototype.copy=function(t){this.x=t.x;this.y=t.y;return this.updateLabel()};e.prototype.set=function(t,i){this.x=t;this.y=i;return this.updateLabel()};e.prototype.updateLabel=function(){if(this._labelIndex>-1){this.children[this._labelIndex].x=this.x+Bu.POINT_LABEL_OFFSET;return this.children[this._labelIndex].y=this.y}};e.prototype.distanceTo=function(t){return Bu.bevel(this.x-t.x,this.y-t.y)};i=null;e.prototype.isNear=function(t,e){var n,s,r,o,h,u,a;if(e==null){e=Bu.DEFAULT_NEAR_DIST}switch(t.type){case"Point":return this.distanceTo(t)<e;case"Line":a=t.distanceTo(this);if(i==null){i=new Bu.Point}t.footPointFrom(this,i);n=i.distanceTo(t.points[0])<t.length+Bu.DEFAULT_NEAR_DIST;s=i.distanceTo(t.points[1])<t.length+Bu.DEFAULT_NEAR_DIST;return a<e&&n&&s;case"Polyline":u=t.lines;for(r=0,o=u.length;r<o;r++){h=u[r];if(this.isNear(h)){return true}}return false}};return e}(Bu.Object2D);Bu.Point.interpolate=function(t,i,e,n){var s,r;s=t.x+(i.x-t.x)*e;r=t.y+(i.y-t.y)*e;if(n!=null){return n.set(s,r)}else{return new Bu.Point(s,r)}};Bu.Line=function(t){o(i,t);function i(t,e,n,s){i.__super__.constructor.call(this);this.type="Line";if(arguments.length<2){this.points=[new Bu.Point,new Bu.Point]}else if(arguments.length<4){this.points=[t.clone(),e.clone()]}else{this.points=[new Bu.Point(t,e),new Bu.Point(n,s)]}this.length;this.midpoint=new Bu.Point;this.keyPoints=this.points;this.on("pointChange",function(t){return function(i){t.length=t.points[0].distanceTo(t.points[1]);return t.midpoint.set((t.points[0].x+t.points[1].x)/2,(t.points[0].y+t.points[1].y)/2)}}(this));this.trigger("pointChange",this)}i.prototype.clone=function(){return new Bu.Line(this.points[0],this.points[1])};i.prototype.set=function(t,i,e,n){if(typeof p4!=="undefined"&&p4!==null){this.points[0].set(t,i);this.points[1].set(e,n)}else{this.points[0]=t;this.points[1]=i}this.trigger("pointChange",this);return this};i.prototype.setPoint1=function(t,i){if(i!=null){this.points[0].set(t,i)}else{this.points[0].copy(t)}this.trigger("pointChange",this);return this};i.prototype.setPoint2=function(t,i){if(i!=null){this.points[1].set(t,i)}else{this.points[1].copy(t)}this.trigger("pointChange",this);return this};i.prototype.isTwoPointsSameSide=function(t,i){var e,n,s,r;e=this.points[0];n=this.points[1];if(e.x===n.x){return(t.x-e.x)*(i.x-e.x)>0}else{s=(e.y-n.y)*(t.x-e.x)/(e.x-n.x)+e.y;r=(e.y-n.y)*(i.x-e.x)/(e.x-n.x)+e.y;return(t.y-s)*(i.y-r)>0}};i.prototype.distanceTo=function(t){var i,e,n,s;n=this.points[0];s=this.points[1];i=(n.y-s.y)/(n.x-s.x);e=n.y-i*n.x;return Math.abs(i*t.x+e-t.y)/Math.sqrt(i*i+1)};i.prototype.distanceTo2=function(t){var i,e,n,s,r,o;r=this.points[0];o=this.points[1];i=(r.y-o.y)/(r.x-o.x);e=r.y-(r.y-o.y)*r.x/(r.x-o.x);n=(t.y+t.x/i-e)/(i+1/i);s=i*n+e;return Bu.bevel(n-t.x,s-t.y)};i.prototype.footPointFrom=function(t,i){var e,n,s,r,o,h,u;r=this.points[0];o=this.points[1];e=(r.y-o.y)/(r.x-o.x);n=r.y-e*r.x;s=t.x+e*t.y;h=(s-e*n)/(e*e+1);u=e*h+n;if(i!=null){return i.set(h,u)}else{return new Bu.Point(h,u)}};i.prototype.getCrossPointWith=function(t){var i,e,n,s,r,o,h,u,a,c,l;u=this.points[0];a=this.points[1];c=t.points[0];l=t.points[1];i=a.y-u.y;n=u.x-a.x;r=i*u.x+n*u.y;e=l.y-c.y;s=c.x-l.x;o=e*c.x+s*c.y;h=i*s-e*n;return new Bu.Point((s*r-n*o)/h,(i*o-e*r)/h)};i.prototype.isCrossWithLine=function(t){var i,e,n,s,r,o,h,u,a,c,l;n=this.points[0].x;u=this.points[0].y;s=this.points[1].x;a=this.points[1].y;r=t.points[0].x;c=t.points[0].y;o=t.points[1].x;l=t.points[1].y;i=(a-u)*(o-r)-(l-c)*(s-n);if(i===0){return false}else{e=((s-n)*(o-r)*(c-u)+(a-u)*(o-r)*n-(l-c)*(s-n)*r)/i;h=((a-u)*(l-c)*(r-n)+(s-n)*(l-c)*u-(o-r)*(a-u)*c)/-i}return(e-n)*(e-s)<0&&(e-r)*(e-o)<0&&(h-u)*(h-a)<0&&(h-c)*(h-l)<0};i.prototype.isCrossWithLine2=function(t){var i,e,n,s,r,o,h,u,a,c;r=this.points[0];o=this.points[1];h=t.points[0];u=t.points[1];n=o.x-r.x;s=o.y-r.y;i=u.x-h.x;e=u.y-h.y;if(i*s-e*n===0){return false}a=(n*(h.y-r.y)+s*(r.x-h.x))/(i*s-e*n);c=(i*(r.y-h.y)+e*(h.x-r.x))/(e*n-i*s);return a>=0&&a<=1&&c>=0&&c<=1};return i}(Bu.Object2D);Bu.Circle=function(t){o(i,t);function i(t,e,n){if(t==null){t=0}if(e==null){e=0}this._radius=n!=null?n:1;i.__super__.constructor.call(this);this.type="Circle";this._center=new Bu.Point(t,e);this.bounds=null;this.keyPoints=[this._center]}i.prototype.clone=function(){return new Bu.Circle(this.cx,this.cy,this.radius)};i.property("cx",{get:function(){return this._center.x},set:function(t){this._center.x=t;return this.trigger("centerChanged",this)}});i.property("cy",{get:function(){return this._center.y},set:function(t){this._center.y=t;return this.trigger("centerChanged",this)}});i.property("center",{get:function(){return this._center},set:function(t){this._center=t;this.cx=t.x;this.cy=t.y;this.keyPoints[0]=t;return this.trigger("centerChanged",this)}});i.property("radius",{get:function(){return this._radius},set:function(t){this._radius=t;this.trigger("radiusChanged",this);return this}});i.prototype._containsPoint=function(t){var i,e;i=t.x-this.cx;e=t.y-this.cy;return Bu.bevel(i,e)<this.radius};return i}(Bu.Object2D);Bu.Triangle=function(t){o(i,t);function i(t,e,n){this.clone=r(this.clone,this);var s,o,h,u,a,c;i.__super__.constructor.call(this);this.type="Triangle";if(arguments.length===6){s=arguments[0],u=arguments[1],o=arguments[2],a=arguments[3],h=arguments[4],c=arguments[5];t=new Bu.Point(s,u);e=new Bu.Point(o,a);n=new Bu.Point(h,c)}this.lines=[new Bu.Line(t,e),new Bu.Line(e,n),new Bu.Line(n,t)];this.points=[t,e,n];this.keyPoints=this.points}i.prototype.clone=function(){return new Bu.Triangle(this.points[0],this.points[1],this.points[2])};i.prototype.area=function(){var t,i,e,n;n=this.points,t=n[0],i=n[1],e=n[2];return Math.abs((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2};i.prototype._containsPoint=function(t){return this.lines[0].isTwoPointsSameSide(t,this.points[2])&&this.lines[1].isTwoPointsSameSide(t,this.points[0])&&this.lines[2].isTwoPointsSameSide(t,this.points[1])};return i}(Bu.Object2D);Bu.Rectangle=function(t){o(i,t);function i(t,e,n,s,r){if(r==null){r=0}i.__super__.constructor.call(this);this.type="Rectangle";this.position=new Bu.Point(t,e);this.center=new Bu.Point(t+n/2,e+s/2);this.size=new Bu.Size(n,s);this.pointRT=new Bu.Point(t+n,e);this.pointRB=new Bu.Point(t+n,e+s);this.pointLB=new Bu.Point(t,e+s);this.points=[this.position,this.pointRT,this.pointRB,this.pointLB];this.cornerRadius=r}i.property("cornerRadius",{get:function(){return this._cornerRadius},set:function(t){this._cornerRadius=t;return this.keyPoints=t>0?[]:this.points}});i.prototype.clone=function(){return new Bu.Rectangle(this.position.x,this.position.y,this.size.width,this.size.height)};i.prototype.containsPoint=function(t){return t.x>this.position.x&&t.y>this.position.y&&t.x<this.position.x+this.size.width&&t.y<this.position.y+this.size.height};return i}(Bu.Object2D);Bu.Fan=function(t){o(i,t);function i(t,e,n,s,r){this.cx=t;this.cy=e;this.radius=n;this.aFrom=s;this.aTo=r;i.__super__.constructor.call(this);this.type="Fan";this.center=new Bu.Point(this.cx,this.cy);this.string=new Bu.Line(this.center.arcTo(this.radius,this.aFrom),this.center.arcTo(this.radius,this.aTo));this.keyPoints=[this.string.points[0],this.string.points[1],new Bu.Point(this.cx,this.cy)]}i.prototype.clone=function(){return new Bu.Fan(this.cx,this.cy,this.radius,this.aFrom,this.aTo)};i.prototype._containsPoint=function(t){var i,e,n;e=t.x-this.cx;n=t.y-this.cy;i=Math.atan2(t.y-this.cy,t.x-this.cx);while(i<this.aFrom){i+=Math.PI*2}return Bu.bevel(e,n)<this.radius&&i>this.aFrom&&i<this.aTo};return i}(Bu.Object2D);Bu.Bow=function(t){o(i,t);function i(t,e,n,s,r){var o;this.cx=t;this.cy=e;this.radius=n;this.aFrom=s;this.aTo=r;i.__super__.constructor.call(this);this.type="Bow";if(this.aFrom>this.aTo){o=[this.aTo,this.aFrom],this.aFrom=o[0],this.aTo=o[1]}this.center=new Bu.Point(this.cx,this.cy);this.string=new Bu.Line(this.center.arcTo(this.radius,this.aFrom),this.center.arcTo(this.radius,this.aTo));this.keyPoints=this.string.points}i.prototype.clone=function(){return new Bu.Bow(this.cx,this.cy,this.radius,this.aFrom,this.aTo)};i.prototype._containsPoint=function(t){var i,e;if(Bu.bevel(this.cx-t.x,this.cy-t.y)<this.radius){i=this.string.isTwoPointsSameSide(this.center,t);e=this.aTo-this.aFrom<Math.PI;return i^e}else{return false}};return i}(Bu.Object2D);Bu.Polygon=function(t){o(i,t);function i(t){var e,n,s,r,o,h,u,a,c,l;i.__super__.constructor.call(this);this.type="Polygon";this.vertices=[];this.lines=[];this.triangles=[];o=Bu.combineOptions(arguments,{angle:0});if(t instanceof Array){if(t!=null){this.vertices=t}}else{if(arguments.length<4){c=0;l=0;h=arguments[0];s=arguments[1]}else{c=arguments[0];l=arguments[1];h=arguments[2];s=arguments[3]}this.vertices=Bu.Polygon.generateRegularPoints(c,l,h,s,o)}if(this.vertices.length>1){for(e=n=0,u=this.vertices.length-1;0<=u?n<u:n>u;e=0<=u?++n:--n){this.lines.push(new Bu.Line(this.vertices[e],this.vertices[e+1]))}this.lines.push(new Bu.Line(this.vertices[this.vertices.length-1],this.vertices[0]))}if(this.vertices.length>2){for(e=r=1,a=this.vertices.length-1;1<=a?r<a:r>a;e=1<=a?++r:--r){this.triangles.push(new Bu.Triangle(this.vertices[0],this.vertices[e],this.vertices[e+1]))}}this.keyPoints=this.vertices}i.prototype.clone=function(){return new Bu.Polygon(this.vertices)};i.prototype.isSimple=function(){var t,i,e,n,s,r,o,h;n=this.lines.length;for(t=e=0,r=n;0<=r?e<r:e>r;t=0<=r?++e:--e){for(i=s=o=t+1,h=n;o<=h?s<h:s>h;i=o<=h?++s:--s){if(this.lines[t].isCrossWithLine(this.lines[i])){return false}}}return true};i.prototype.addPoint=function(t,i){if(i==null){this.vertices.push(t);if(this.vertices.length>1){this.lines[this.lines.length-1].points[1]=t}if(this.vertices.length>0){this.lines.push(new Bu.Line(this.vertices[this.vertices.length-1],this.vertices[0]))}if(this.vertices.length>2){return this.triangles.push(new Bu.Triangle(this.vertices[0],this.vertices[this.vertices.length-2],this.vertices[this.vertices.length-1]))}}else{return this.vertices.splice(i,0,t)}};i.prototype._containsPoint=function(t){var i,e,n,s;n=this.triangles;for(i=0,e=n.length;i<e;i++){s=n[i];if(s.containsPoint(t)){return true}}return false};i.generateRegularPoints=function(t,i,e,n,s){var r,o,h,u,a,c,l,f,p,y;o=s.angle;l=e;c=[];h=Math.PI*2/n;for(u=a=0,f=n;0<=f?a<f:a>f;u=0<=f?++a:--a){r=u*h+o;p=t+l*Math.cos(r);y=i+l*Math.sin(r);c[u]=new Bu.Point(p,y)}return c};return i}(Bu.Object2D);Bu.Polyline=function(t){var i;o(e,t);function e(t){var i,n,s,o;this.vertices=t!=null?t:[];this.calcLength=r(this.calcLength,this);this.updateLines=r(this.updateLines,this);this.clone=r(this.clone,this);e.__super__.constructor.call(this);this.type="Polyline";if(arguments.length>1){o=[];for(i=n=0,s=arguments.length/2;0<=s?n<s:n>s;i=0<=s?++n:--n){o.push(new Bu.Point(arguments[i*2],arguments[i*2+1]))}this.vertices=o}this.lines=[];this.length=0;this.pointNormalizedPos=[];this.keyPoints=this.vertices;this.fill(false);this.on("pointChange",function(t){return function(){if(t.vertices.length>1){t.updateLines();t.calcLength();return t.calcPointNormalizedPos()}}}(this));this.trigger("pointChange",this)}e.prototype.clone=function(){return new Bu.Polyline(this.vertices)};e.prototype.updateLines=function(){var t,i,e,n;n=[];for(t=i=0,e=this.vertices.length-1;0<=e?i<e:i>e;t=0<=e?++i:--i){if(this.lines[t]!=null){n.push(this.lines[t].set(this.vertices[t],this.vertices[t+1]))}else{n.push(this.lines[t]=new Bu.Line(this.vertices[t],this.vertices[t+1]))}}return n};e.prototype.calcLength=function(){var t,i,e,n;if(this.vertices.length<2){return this.length=0}else{e=0;for(t=i=1,n=this.vertices.length;1<=n?i<n:i>n;t=1<=n?++i:--i){e+=this.vertices[t].distanceTo(this.vertices[t-1])}return this.length=e}};e.prototype.calcPointNormalizedPos=function(){var t,i,e,n,s;t=0;this.pointNormalizedPos[0]=0;s=[];for(i=e=1,n=this.vertices.length;1<=n?e<n:e>n;i=1<=n?++e:--e){t+=this.vertices[i].distanceTo(this.vertices[i-1])/this.length;s.push(this.pointNormalizedPos[i]=t)}return s};e.prototype.getNormalizedPos=function(t){if(t!=null){return this.pointNormalizedPos[t]}else{return this.pointNormalizedPos}};e.prototype.compress=function(t){var i,e,n,r,o,h,u,a;if(t==null){t=.8}i=[];u=this.vertices;for(e in u){if(!s.call(u,e))continue;if(e<2){i[e]=this.vertices[e]}else{a=i.slice(-2),r=a[0],h=a[1];o=this.vertices[e];n=Math.abs(Math.atan2(r.y-h.y,r.x-h.x)-Math.atan2(h.y-o.y,h.x-o.x));if(n<t*t*Math.PI/2){i[i.length-1]=o}else{i.push(o)}}}this.vertices=i;this.keyPoints=this.vertices;return this};i=function(t){var i,e,n;for(i=e=0,n=this.vertices.length;0<=n?e<n:e>n;i=0<=n?++e:--e){this.vertices[i].copy(t[i])}if(this.vertices.length>t.length){this.vertices.splice(t.length)}return this.trigger("pointChange",this)};e.prototype.addPoint=function(t,i){if(i==null){this.vertices.push(t);if(this.vertices.length>1){this.lines.push(new Bu.Line(this.vertices[this.vertices.length-2],this.vertices[this.vertices.length-1]))}}else{this.vertices.splice(i,0,t)}return this.trigger("pointChange",this)};return e}(Bu.Object2D);Bu.Spline=function(t){var i;o(e,t);function e(t){var n;e.__super__.constructor.call(this);this.type="Spline";if(t instanceof Bu.Polyline){n=t;this.vertices=n.vertices;n.on("pointChange",function(t){return function(e){t.vertices=e.vertices;return i(t)}}(this))}else{this.vertices=Bu.clone(t)}this.keyPoints=this.vertices;this.controlPointsAhead=[];this.controlPointsBehind=[];this.fill(false);this.smoothFactor=Bu.DEFAULT_SPLINE_SMOOTH;this._smoother=false;i(this)}e.property("smoother",{get:function(){return this._smoother;
},set:function(t){var e;e=this._smoother;this._smoother=t;if(e!==this._smoother){return i(this)}}});e.prototype.clone=function(){return new Bu.Spline(this.vertices)};e.prototype.addPoint=function(t){this.vertices.push(t);return i(this)};i=function(t){var i,e,n,s,r,o,h,u,a,c,l,f,p,y,d;t.keyPoints=t.vertices;o=t.vertices;n=o.length;if(n>=1){t.controlPointsBehind[0]=o[0]}if(n>=2){t.controlPointsAhead[n-1]=o[n-1]}if(n>=3){u=[];for(i=e=1,h=n-1;1<=h?e<h:e>h;i=1<=h?++e:--e){c=Math.atan2(o[i].y-o[i-1].y,o[i].x-o[i-1].x);l=Math.atan2(o[i+1].y-o[i].y,o[i+1].x-o[i].x);s=Bu.bevel(o[i].y-o[i-1].y,o[i].x-o[i-1].x);r=Bu.bevel(o[i].y-o[i+1].y,o[i].x-o[i+1].x);a=c+(l-c)*(t._smoother?s/(s+r):.5);if(Math.abs(a-c)>Math.PI/2){a+=Math.PI}f=o[i].x-s*t.smoothFactor*Math.cos(a);y=o[i].y-s*t.smoothFactor*Math.sin(a);p=o[i].x+r*t.smoothFactor*Math.cos(a);d=o[i].y+r*t.smoothFactor*Math.sin(a);t.controlPointsAhead[i]=new Bu.Point(f,y);u.push(t.controlPointsBehind[i]=new Bu.Point(p,d))}return u}};return e}(Bu.Object2D);Bu.PointText=function(t){o(i,t);function i(t,e,n){var s;this.text=t;this.x=e!=null?e:0;this.y=n!=null?n:0;this.setContextAlign=r(this.setContextAlign,this);i.__super__.constructor.call(this);this.type="PointText";this.strokeStyle=null;this.fillStyle=Bu.DEFAULT_TEXT_FILL_STYLE;s=Bu.combineOptions(arguments,{align:"00",fontFamily:"Verdana",fontSize:11});this.align=s.align;this._fontFamily=s.fontFamily;this._fontSize=s.fontSize;this.font=this._fontSize+"px "+this._fontFamily||s.font;this.setContextAlign(this.align)}i.property("fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t;return this.font=this._fontSize+"px "+this._fontFamily}});i.property("fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t;return this.font=this._fontSize+"px "+this._fontFamily}});i.prototype.setContextAlign=function(t){var i,e;if(t.length===1){t=""+t+t}i=t.substring(0,1);e=t.substring(1,2);this.textAlign=function(){switch(i){case"-":return"right";case"0":return"center";case"+":return"left"}}();return this.textBaseline=function(){switch(e){case"-":return"bottom";case"0":return"middle";case"+":return"top"}}()};return i}(Bu.Object2D);Bu.Image=function(t){o(i,t);function i(t,e,n,s,r){this.url=t;if(e==null){e=0}if(n==null){n=0}i.__super__.constructor.call(this);this.type="Image";this.autoSize=true;this.size=new Bu.Size(Bu.DEFAULT_IMAGE_SIZE,Bu.DEFAULT_IMAGE_SIZE);this.translate=new Bu.Vector(e,n);this.center=new Bu.Vector(e+s/2,n+r/2);if(s!=null){this.size.set(s,r);this.autoSize=false}this.pivot=new Bu.Vector(.5,.5);this.image=new window.Image;this.loaded=false;this.image.onload=function(t){return function(i){if(t.autoSize){t.size.set(t.image.width,t.image.height)}return t.loaded=true}}(this);this.image.src=this.url}return i}(Bu.Object2D);Bu.Animation=function(){function t(t){this.from=t.from;this.to=t.to;this.data=t.data||{};this.duration=t.duration||.5;this.repeat=t.repeat!=null?t.repeat:false;this.init=t.init;this.update=t.update;this.finish=t.finish}t.prototype.apply=function(t,i){return Bu.animationRunner.add(this,t,i)};return t}();Bu.animations={fadeIn:new Bu.Animation({update:function(t){return this.opacity=t}}),fadeOut:new Bu.Animation({update:function(t){return this.opacity=1-t}}),spin:new Bu.Animation({update:function(t){return this.rotation=t*Math.PI*2}}),spinIn:new Bu.Animation({init:function(t,i){if(i==null){i=1}return t.data.ds=i},update:function(t,i){this.opacity=t;this.rotation=t*Math.PI*4;return this.scale=t*i.ds}}),spinOut:new Bu.Animation({update:function(t){this.opacity=1-t;this.rotation=t*Math.PI*4;return this.scale=1-t}}),blink:new Bu.Animation({duration:.2,from:0,to:512,update:function(t){t=Math.floor(Math.abs(d-256));return this.fillStyle="rgb("+t+", "+t+", "+t+")"}}),shake:new Bu.Animation({init:function(t,i){t.data.ox=this.translate.x;return t.data.range=i||20},update:function(t,i){return this.translate.x=Math.sin(t*Math.PI*8)*i.range+i.ox}}),puff:new Bu.Animation({duration:.15,init:function(t){t.from={opacity:this.opacity,scale:this.scale.x};return t.to={opacity:this.opacity===1?0:1,scale:this.opacity===1?this.scale.x*1.5:this.scale.x/1.5}},update:function(t){this.opacity=t.opacity;return this.scale=t.scale}}),clip:new Bu.Animation({init:function(t){if(this.scale.y!==0){t.from=this.scale.y;return t.to=0}else{t.from=this.scale.y;return t.to=this.scale.x}},update:function(t){return this.scale.y=t}}),flipX:new Bu.Animation({init:function(t){t.from=this.scale.x;return t.to=-t.from},update:function(t){return this.scale.x=t}}),flipY:new Bu.Animation({init:function(t){t.from=this.scale.y;return t.to=-t.from},update:function(t){return this.scale.y=t}}),moveTo:new Bu.Animation({init:function(t,i){if(i!=null){t.from=this.translate.x;return t.to=i}else{return console.error("animation moveTo need an argument")}},update:function(t){return this.translate.x=t}}),moveBy:new Bu.Animation({init:function(t,i){if(i!=null){t.from=this.translate.x;return t.to=this.translate.x+parseFloat(i)}else{return console.error("animation moveTo need an argument")}},update:function(t){return this.translate.x=t}})};Bu.AnimationRunner=function(){function t(){this.runningAnimations=[]}t.prototype.add=function(t,i,e){var n;this.runningAnimations.push({animation:t,target:i,startTime:Bu.now(),current:t.data,finished:false});return(n=t.init)!=null?n.call(i,t,e):void 0};t.prototype.update=function(){var t,i,e,n,r,o,h,u,a,c,l,f;o=Bu.now();h=this.runningAnimations;c=[];for(n=0,r=h.length;n<r;n++){f=h[n];if(f.finished){continue}t=f.animation;l=(o-f.startTime)/(t.duration*1e3);if(l>1){i=true;if(t.repeat){l=0;f.startTime=Bu.now()}else{l=1;f.finished=true}}if(t.from!=null){if(t.from instanceof Object){u=t.from;for(e in u){if(!s.call(u,e))continue;if(e in t.to){f.current[e]=t.to[e]*l-t.from[e]*(l-1)}}}else{f.current=t.to*l-t.from*(l-1)}t.update.apply(f.target,[f.current,l])}else{t.update.apply(f.target,[l,f.current])}if(i){c.push((a=t.finish)!=null?a.call(f.target,t):void 0)}else{c.push(void 0)}}return c};t.prototype.hookUp=function(t){return t.on("update",function(t){return function(){return t.update()}}(this))};return t}();Bu.animationRunner=new Bu.AnimationRunner;Bu.RandomShapeGenerator=function(){var t;t=30;function i(t){this.bu=t}i.prototype.randomX=function(){return Bu.rand(t,this.bu.width-t*2)};i.prototype.randomY=function(){return Bu.rand(t,this.bu.height-t*2)};i.prototype.randomRadius=function(){return Bu.rand(5,Math.min(this.bu.width,this.bu.height)/2)};i.prototype.generate=function(t){switch(t){case"circle":return this.generateCircle();case"bow":return this.generateBow();case"triangle":return this.generateTriangle();case"rectangle":return this.generateRectangle();case"fan":return this.generateFan();case"polygon":return this.generatePolygon();case"line":return this.generateLine();case"polyline":return this.generatePolyline();default:return console.warn("not support shape: "+t)}};i.prototype.generateCircle=function(){var t;t=new Bu.Circle(this.randomX(),this.randomY(),this.randomRadius());t.center.label="O";return t};i.prototype.generateBow=function(){var t,i,e;t=Bu.rand(Math.PI*2);i=t+Bu.rand(Math.PI/2,Math.PI*2);e=new Bu.Bow(this.randomX(),this.randomY(),this.randomRadius(),t,i);e.string.points[0].label="A";e.string.points[1].label="B";return e};i.prototype.generateTriangle=function(){var t,i,e,n;e=[];for(t=i=0;i<=2;t=++i){e[t]=new Bu.Point(this.randomX(),this.randomY())}n=new Bu.Triangle(e[0],e[1],e[2]);n.points[0].label="A";n.points[1].label="B";n.points[2].label="C";return n};i.prototype.generateRectangle=function(){return new Bu.Rectangle(Bu.rand(this.bu.width),Bu.rand(this.bu.height),Bu.rand(this.bu.width/2),Bu.rand(this.bu.height/2))};i.prototype.generateFan=function(){var t,i,e;t=Bu.rand(Math.PI*2);i=t+Bu.rand(Math.PI/2,Math.PI*2);e=new Bu.Fan(this.randomX(),this.randomY(),this.randomRadius(),t,i);e.string.points[0].label="A";e.string.points[1].label="B";return e};i.prototype.generatePolygon=function(){var t,i,e,n;n=[];for(t=i=0;i<=3;t=++i){e=new Bu.Point(this.randomX(),this.randomY());e.label="P"+t;n.push(e)}return new Bu.Polygon(n)};i.prototype.generateLine=function(){var t;t=new Bu.Line(this.randomX(),this.randomY(),this.randomX(),this.randomY());t.points[0].label="A";t.points[1].label="B";return t};i.prototype.generatePolyline=function(){var t,i,e,n;n=new Bu.Polyline;for(t=i=0;i<=3;t=++i){e=new Bu.Point(this.randomX(),this.randomY());e.label="P"+t;n.addPoint(e)}return n};return i}()}).call(this);