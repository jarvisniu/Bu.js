// Bu.js - https://github.com/jarvisniu/Bu.js
(function(){var t,n,e,s,r,o,h={}.hasOwnProperty,u=function(t,i){return function(){return t.apply(i,arguments)}},a=function(t,i){function n(){this.constructor=t}for(var e in i)h.call(i,e)&&(t[e]=i[e]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};o=s,s=window||this,s.Bu=function(){return function(t,i,n){n.prototype=t.prototype;var e=new n,s=t.apply(e,i);return Object(s)===s?s:e}(Bu.Renderer,arguments,function(){})},Bu.global=s,s=o,Bu.VERSION="0.3.3",Bu.DEFAULT_STROKE_STYLE="#048",Bu.DEFAULT_FILL_STYLE="rgba(64, 128, 192, 0.5)",Bu.DEFAULT_DASH_STYLE=[8,4],Bu.DEFAULT_SPLINE_SMOOTH=.25,Bu.DEFAULT_STROKE_STYLE_HOVER="rgba(255, 128, 0, 0.75)",Bu.DEFAULT_FILL_STYLE_HOVER="rgba(255, 128, 128, 0.5)",Bu.DEFAULT_TEXT_FILL_STYLE="black",Bu.DEFAULT_IMAGE_SIZE=20,Bu.POINT_RENDER_SIZE=2.25,Bu.POINT_LABEL_OFFSET=5,Bu.DEFAULT_BOUND_STROKE_STYLE="#444",Bu.DEFAULT_BOUND_DASH_STYLE=[6,6],Bu.DEFAULT_NEAR_DIST=5,Bu.MOUSE_BUTTON_NONE=-1,Bu.MOUSE_BUTTON_LEFT=0,Bu.MOUSE_BUTTON_MIDDLE=1,Bu.MOUSE_BUTTON_RIGHT=2,Bu.average=function(){var t,i,n,e,s;for(e=arguments,"object"==typeof arguments[0]&&(e=arguments[0]),s=0,i=0,n=e.length;n>i;i++)t=e[i],s+=t;return s/e.length},Bu.bevel=function(t,i){return Math.sqrt(t*t+i*i)},Bu.rand=function(t,i){return null==i&&(i=t,t=0),Math.random()*(i-t)+t},Bu.r2d=function(t){return(180*t/Math.PI).toFixed(1)},Bu.d2r=function(t){return t*Math.PI/180},Bu.now=null!=Bu.global.performance?function(){return Bu.global.performance.now()}:function(){return Date.now()},Bu.combineOptions=function(t,i){var n,e;if(null==i&&(i={}),n=t[t.length-1],"object"==typeof n)for(e in n)i[e]=n[e];return i},Bu.clone=function(t,i){var n,e,s,r;if(null==i&&(i=!1),t instanceof Array){n=[],s=[];for(e in t)h.call(t,e)&&s.push(n[e]=t[e]);return s}if(t instanceof Object){n={},r=[];for(e in t)h.call(t,e)&&r.push(n[e]=t[e]);return r}},Bu.data=function(t,i){return null!=i?localStorage["Bu."+t]=JSON.stringify(i):(i=localStorage["Bu."+t],null!=i?JSON.parse(i):null)},Function.prototype.property=function(t,i){return Object.defineProperty(this.prototype,t,i)},Function.prototype.throttle=function(t){var i,n;return null==t&&(t=.5),i=0,n=0,function(e){return function(){return i=Date.now(),i-n>1e3*t?(e.apply(null,arguments),n=i):void 0}}(this)},Function.prototype.debounce=function(t){var i,n,e;return null==t&&(t=.5),i=null,e=null,n=function(t){return function(){return t.apply(null,i)}}(this),function(){return i=arguments,clearTimeout(e),e=setTimeout(n,1e3*t)}},(t=Array.prototype).each||(t.each=function(t){var i;for(i=0;i<this.length;)t(this[i]),i++;return this}),(n=Array.prototype).map||(n.map=function(t){var i,n;for(i=[],n=0;n<this.length;)i.push(t(this[n])),n++;return this}),r=Bu.data("lastInfo"),e=Date.now(),null!=r&&6e4>e-r||("function"==typeof console.info&&console.info("Bu.js v"+Bu.VERSION+" - [https://github.com/jarvisniu/Bu.js]"),Bu.data("lastInfo",e)),Bu.Bounds=function(){function t(t){var i,n,e,s,r,o,h;switch(this.target=t,this.x1=this.y1=this.x2=this.y2=0,this.isEmpty=!0,this.point1=new Bu.Vector,this.point2=new Bu.Vector,this.strokeStyle=Bu.DEFAULT_BOUND_STROKE_STYLE,this.dashStyle=Bu.DEFAULT_BOUND_DASH_STYLE,this.dashOffset=0,this.target.type){case"Line":case"Triangle":case"Rectangle":for(r=this.target.points,i=0,n=r.length;n>i;i++)h=r[i],this.expandByPoint(h);break;case"Circle":case"Bow":case"Fan":this.expandByCircle(this.target),this.target.on("centerChanged",function(t){return function(){return t.clear(),t.expandByCircle(t.target)}}(this)),this.target.on("radiusChanged",function(t){return function(){return t.clear(),t.expandByCircle(t.target)}}(this));break;case"Polyline":case"Polygon":for(o=this.target.vertices,s=0,e=o.length;e>s;s++)h=o[s],this.expandByPoint(h);break;default:console.warn('Bounds: not support shape type "'+this.target.type+'"')}}return t.prototype.containsPoint=function(t){return this.x1<t.x&&this.x2>t.x&&this.y1<t.y&&this.y2>t.y},t.prototype.clear=function(){return this.x1=this.y1=this.x2=this.y2=0,this.isEmpty=!0},t.prototype.expandByPoint=function(t){return this.isEmpty?(this.isEmpty=!1,this.x1=this.x2=t.x,this.y1=this.y2=t.y):(t.x<this.x1&&(this.x1=t.x),t.x>this.x2&&(this.x2=t.x),t.y<this.y1&&(this.y1=t.y),t.y>this.y2?this.y2=t.y:void 0)},t.prototype.expandByCircle=function(t){var i,n;return i=t.center,n=t.radius,this.isEmpty?(this.isEmpty=!1,this.x1=i.x-n,this.x2=i.x+n,this.y1=i.y-n,this.y2=i.y+n):(i.x-n<this.x1&&(this.x1=i.x-n),i.x+n>this.x2&&(this.x2=i.x+n),i.y-n<this.y1&&(this.y1=i.y-n),i.y+n>this.y2?this.y2=i.y+n:void 0)},t}(),Bu.Size=function(){function t(t,i){this.width=t,this.height=i,this.type="Size"}return t.prototype.set=function(t,i){return this.width=t,this.height=i},t}(),Bu.Vector=function(){function t(t,i){this.x=null!=t?t:0,this.y=null!=i?i:0}return t.prototype.set=function(t,i){this.x=t,this.y=i},t}(),Bu.Colorful=function(){return this.strokeStyle=Bu.DEFAULT_STROKE_STYLE,this.fillStyle=Bu.DEFAULT_FILL_STYLE,this.dashStyle=!1,this.lineWidth=1,this.dashOffset=0,this.stroke=function(t){switch(null==t&&(t=!0),t){case!0:this.strokeStyle=Bu.DEFAULT_STROKE_STYLE;break;case!1:this.strokeStyle=null;break;default:this.strokeStyle=t}return this},this.fill=function(t){switch(null==t&&(t=!0),t){case!1:this.fillStyle=null;break;case!0:this.fillStyle=Bu.DEFAULT_FILL_STYLE;break;default:this.fillStyle=t}return this},this.dash=function(t){switch(null==t&&(t=!0),"number"==typeof t&&(t=[t,t]),t){case!1:this.dashStyle=null;break;case!0:this.dashStyle=Bu.DEFAULT_DASH_STYLE;break;default:this.dashStyle=t}return this}},Bu.Event=function(){var t;return t={},this.on=function(i,n){var e;return e=t[i]||(t[i]=[]),e.indexOf(-1===n)?e.push(n):void 0},this.once=function(t,i){return i.once=!0,this.on(t,i)},this.off=function(i,n){var e,s;if(s=t[i],null!=n){if(null!=s&&(e=s.indexOf(n),e>-1))return s.splice(e,1)}else if(null!=s)return s.length=0},this.trigger=function(n,e){var s,r,o,h,u;if(h=t[n],null!=h){for(e||(e={}),e.target=this,u=[],s=0,r=h.length;r>s;s++)o=h[s],o.call(this,e),o.once?(h.splice(i,1),u.push(i-=1)):u.push(void 0);return u}}},function(t){var i;return t.$=function(t){var n;return n=[],"string"==typeof t&&(n=[].slice.call(document.querySelectorAll(t))),i.apply(n),n},i=function(){var t;return this.on=function(t){return function(i,n){return t.each(function(t){return t.addEventListener(i,n)}),t}}(this),this.off=function(t){return function(i,n){return t.each(function(t){return t.removeEventListener(i,n)}),t}}(this),t="svg line rect circle ellipse polyline polygon path text",this.append=function(i){return function(n){return i.each(function(e,s){var r,o;return o=t.indexOf(n.toLowerCase()),r=o>-1?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n),i[s]=e.appendChild(r)}),i}}(this),this.text=function(t){return function(i){return t.each(function(t){return t.textContent=i}),t}}(this),this.html=function(t){return function(i){return t.each(function(t){return t.innerHTML=i}),t}}(this),this.style=function(t){return function(i,n){return t.each(function(t){var e,s,r;s=t.getAttribute("style"),r={},s&&s.split(";").each(function(t){var i;return i=t.split(":"),r[i[0]]=i[1]}),r[i]=n,s="";for(e in r)s+=e+": "+r[e]+"; ";return t.setAttribute("style",s)}),t}}(this),this.hasClass=function(t){return function(i){var n,e,s;if(0===t.length)return!1;for(s=0;s<t.length;){if(n=t[s].getAttribute("class"),e=n.split(RegExp(" +")),!e.contains(i))return!1;s++}return t}}(this),this.addClass=function(t){return function(i){return t.each(function(t){var n,e;return n=t.getAttribute("class"),e=n.split(RegExp(" +")),e.contains(i)?void 0:(e.push(i),t.setAttribute("class",e.join(" ")))}),t}}(this),this.removeClass=function(t){return function(i){return t.each(function(t){var n,e;return n=t.getAttribute("class")||"",e=n.split(RegExp(" +")),e.contains(i)?(e.remove(i),e.length>0?t.setAttribute("class",e.join(" ")):t.removeAttribute("class")):void 0}),t}}(this),this.toggleClass=function(t){return function(i){return t.each(function(t){var n,e;return n=t.getAttribute("class"),e=n.split(RegExp(" +")),e.contains(i)?e.remove(i):e.push(i),e.length>0?t.setAttribute("class",e.join(" ")):t.removeAttribute("class")}),t}}(this),this.attr=function(t){return function(i,n){return null!=n?(t.each(function(t){return t.setAttribute(i,n)}),t):t[0].getAttribute(i)}}(this),this.hasAttr=function(t){return function(i){var n;if(0===t.length)return!1;for(n=0;n<t.length;){if(!t[n].hasAttribute(i))return!1;n++}return t}}(this),this.removeAttr=function(t){return function(i){return t.each(function(t){return t.removeAttribute(i)}),t}}(this),this.val=function(t){return function(){var i;return null!=(i=t[0])?i.value:void 0}}(this)},t.$.ready=function(t){return document.addEventListener("DOMContentLoaded",t)},t.$.ajax=function(t,i){var n;return i||("object"==typeof t?(i=t,t=i.url):i={}),i.method||(i.method="GET"),null==i.async&&(i.async=!0),n=new XMLHttpRequest,n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){if(null!=i.success)return i.success(n.responseText,n.status,n)}else if(null!=i.error&&i.error(n,n.status),null!=i.complete)return i.complete(n,n.status)},n.open(i.method,t,i.async,i.username,i.password),n.send(null)}}(Bu.global),Bu.Object2D=function(){function t(){Bu.Colorful.apply(this),Bu.Event.apply(this),this.visible=!0,this.opacity=1,this.translate=new Bu.Vector,this.rotation=0,this._scale=new Bu.Vector(1,1),this.skew=new Bu.Vector,this.bounds=null,this.keyPoints=null,this.children=[],this.parent=null}return t.property("scale",{get:function(){return this._scale},set:function(t){return"number"==typeof t?this._scale.x=this._scale.y=t:this.scale=t}}),t.prototype.animate=function(t,i){var n,e;if("string"==typeof t)return t in Bu.animations?Bu.animations[t].apply(this,i):console.warn('Bu.animations["'+t+"\"] doesn't exists.");if(t instanceof Array){i instanceof Array||(i=[i]),e=[];for(n in t)h.call(t,n)&&e.push(this.animate(t[n],i));return e}return t.apply(this,i)},t.prototype.containsPoint=function(t){return(null==this.bounds||this.bounds.containsPoint(t))&&this._containsPoint?this._containsPoint(t):!1},t}(),Bu.Renderer=function(){function t(){this.drawShape=u(this.drawShape,this),this.drawShapes=u(this.drawShapes,this);var t,i,n,e;Bu.Event.apply(this),this.type="Renderer",i=Bu.combineOptions(arguments,{width:800,height:600,fps:60,fillParent:!1,showKeyPoints:!1,border:!1}),this.width=i.width,this.height=i.height,this.fps=i.fps,this.container=i.container,this.fillParent=i.fillParent,this.isShowKeyPoints=i.showKeyPoints,this.tickCount=0,this.isRunning=!1,this.pixelRatio=Bu.global.devicePixelRatio||1,this.dom=document.createElement("canvas"),this.context=this.dom.getContext("2d"),this.context.textBaseline="top","undefined"!=typeof ClipMeter&&null!==ClipMeter&&(this.clipMeter=new ClipMeter),this.shapes=[],this.fillParent||(this.dom.style.width=this.width+"px",this.dom.style.height=this.height+"px",this.dom.width=this.width*this.pixelRatio,this.dom.height=this.height*this.pixelRatio),null!=i.border&&i.border&&(this.dom.style.border="solid 1px gray"),this.dom.style.cursor="crosshair",this.dom.style.boxSizing="content-box",this.dom.style.background="#eee",this.dom.oncontextmenu=function(){return!1},null!=(n=Bu.animationRunner)&&n.hookUp(this),t=function(t){return function(){var i,n,e,s;return i=t.dom.height/t.dom.width,n=t.container.clientHeight/t.container.clientWidth,i>n?(e=t.container.clientHeight,s=e/n):(s=t.container.clientWidth,e=s*n),t.width=t.dom.width=s*t.pixelRatio,t.height=t.dom.height=e*t.pixelRatio,t.dom.style.width=s+"px",t.dom.style.height=e+"px",t.render()}}(this),this.fillParent&&(Bu.global.window.addEventListener("resize",t),this.dom.addEventListener("DOMNodeInserted",t)),e=function(t){return function(){return t.isRunning&&(null!=t.clipMeter&&t.clipMeter.start(),t.render(),t.trigger("update",{tickCount:t.tickCount}),t.tickCount+=1,null!=t.clipMeter&&t.clipMeter.tick()),requestAnimationFrame(e)}}(this),e(),null!=this.container&&("string"==typeof this.container&&(this.container=document.querySelector(this.container)),setTimeout(function(t){return function(){return t.container.appendChild(t.dom)}}(this),100)),this.isRunning=!0}return t.prototype.pause=function(){return this.isRunning=!1},t.prototype["continue"]=function(){return this.isRunning=!0},t.prototype.toggle=function(){return this.isRunning=!this.isRunning},t.prototype.append=function(t){var i,n,e;if(t instanceof Array)for(i=0,n=t.length;n>i;i++)e=t[i],this.shapes.push(e);else this.shapes.push(t);return this},t.prototype.render=function(){return this.context.save(),this.context.scale(this.pixelRatio,this.pixelRatio),this.clearCanvas(),this.drawShapes(this.shapes),this.context.restore(),this},t.prototype.clearCanvas=function(){return this.context.clearRect(0,0,this.width,this.height),this},t.prototype.drawShapes=function(t){var i,n,e;if(null!=t)for(i=0,n=t.length;n>i;i++)e=t[i],this.context.save(),this.drawShape(e),this.context.restore();return this},t.prototype.drawShape=function(t){var i,n,e;if(!t.visible)return this;switch(this.context.translate(t.translate.x,t.translate.y),this.context.rotate(t.rotation),n=t.scale.x,e=t.scale.y,(n/e>100||.01>n/e)&&(Math.abs(n)<.02&&(n=0),Math.abs(e)<.02&&(e=0)),this.context.scale(n,e),this.context.globalAlpha*=t.opacity,null!=t.strokeStyle&&(this.context.strokeStyle=t.strokeStyle,this.context.lineWidth=t.lineWidth,null!=t.lineCap&&(this.context.lineCap=t.lineCap),null!=t.lineJoin&&(this.context.lineJoin=t.lineJoin)),this.context.beginPath(),t.type){case"Point":this.drawPoint(t);break;case"Line":this.drawLine(t);break;case"Circle":this.drawCircle(t);break;case"Triangle":this.drawTriangle(t);break;case"Rectangle":this.drawRectangle(t);break;case"Fan":this.drawFan(t);break;case"Bow":this.drawBow(t);break;case"Polygon":this.drawPolygon(t);break;case"Polyline":this.drawPolyline(t);break;case"Spline":this.drawSpline(t);break;case"PointText":this.drawPointText(t);break;case"Image":this.drawImage(t);break;case"Bounds":this.drawBounds(t);break;default:console.log("drawShapes(): unknown shape: ",t)}return null!=t.fillStyle&&(this.context.fillStyle=t.fillStyle,this.context.fill()),t.dashStyle?(this.context.lineDashOffset=t.dashOffset,"function"==typeof(i=this.context).setLineDash&&i.setLineDash(t.dashStyle),this.context.stroke(),this.context.setLineDash([])):null!=t.strokeStyle&&this.context.stroke(),null!=t.children&&this.drawShapes(t.children),this.isShowKeyPoints&&this.drawShapes(t.keyPoints),this},t.prototype.drawPoint=function(t){return this.context.arc(t.x,t.y,Bu.POINT_RENDER_SIZE,0,2*Math.PI),this},t.prototype.drawLine=function(t){return this.context.moveTo(t.points[0].x,t.points[0].y),this.context.lineTo(t.points[1].x,t.points[1].y),this},t.prototype.drawCircle=function(t){return this.context.arc(t.cx,t.cy,t.radius,0,2*Math.PI),this},t.prototype.drawTriangle=function(t){return this.context.lineTo(t.points[0].x,t.points[0].y),this.context.lineTo(t.points[1].x,t.points[1].y),this.context.lineTo(t.points[2].x,t.points[2].y),this.context.closePath(),this},t.prototype.drawRectangle=function(t){return 0!==t.cornerRadius?this.drawRoundRectangle(t):(this.context.rect(t.position.x,t.position.y,t.size.width,t.size.height),this)},t.prototype.drawRoundRectangle=function(t){var i,n,e,s,r,o;return e=t.position.x,s=t.pointRB.x,r=t.position.y,o=t.pointRB.y,n=t.cornerRadius,this.context.moveTo(e,r+n),this.context.arcTo(e,r,e+n,r,n),this.context.lineTo(s-n,r),this.context.arcTo(s,r,s,r+n,n),this.context.lineTo(s,o-n),this.context.arcTo(s,o,s-n,o,n),this.context.lineTo(e+n,o),this.context.arcTo(e,o,e,o-n,n),this.context.closePath(),null!=t.strokeStyle&&t.dashStyle&&"function"==typeof(i=this.context).setLineDash&&i.setLineDash(t.dashStyle),this},t.prototype.drawFan=function(t){return this.context.arc(t.cx,t.cy,t.radius,t.aFrom,t.aTo),this.context.lineTo(t.cx,t.cy),this.context.closePath(),this},t.prototype.drawBow=function(t){return this.context.arc(t.cx,t.cy,t.radius,t.aFrom,t.aTo),this.context.closePath(),this},t.prototype.drawPolygon=function(t){var i,n,e,s;for(s=t.vertices,i=0,n=s.length;n>i;i++)e=s[i],this.context.lineTo(e.x,e.y);return this.context.closePath(),this},t.prototype.drawPolyline=function(t){var i,n,e,s;for(s=t.vertices,i=0,n=s.length;n>i;i++)e=s[i],this.context.lineTo(e.x,e.y);return this},t.prototype.drawSpline=function(t){var i,n,e,s;if(null!=t.strokeStyle)if(e=t.vertices.length,2===e)this.context.moveTo(t.vertices[0].x,t.vertices[0].y),this.context.lineTo(t.vertices[1].x,t.vertices[1].y);else if(e>2)for(this.context.moveTo(t.vertices[0].x,t.vertices[0].y),i=n=1,s=e-1;s>=1?s>=n:n>=s;i=s>=1?++n:--n)this.context.bezierCurveTo(t.controlPointsBehind[i-1].x,t.controlPointsBehind[i-1].y,t.controlPointsAhead[i].x,t.controlPointsAhead[i].y,t.vertices[i].x,t.vertices[i].y);return this},t.prototype.drawPointText=function(t){return this.context.textAlign=t.textAlign,this.context.textBaseline=t.textBaseline,this.context.font=t.font,null!=t.strokeStyle&&this.context.strokeText(t.text,t.x,t.y),null!=t.fillStyle&&(this.context.fillStyle=t.fillStyle,this.context.fillText(t.text,t.x,t.y)),this},t.prototype.drawImage=function(t){var i,n,e,s;return t.loaded&&(s=t.size.width,e=t.size.height,i=-s*t.pivot.x,n=-e*t.pivot.y,this.context.drawImage(t.image,i,n,s,e)),this},t.prototype.drawBounds=function(t){return this.context.rect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1),this},t}(),Bu.Bow=function(t){function i(t,n,e,s,r){var o;this.cx=t,this.cy=n,this.radius=e,this.aFrom=s,this.aTo=r,i.__super__.constructor.call(this),this.type="Bow",this.aFrom>this.aTo&&(o=[this.aTo,this.aFrom],this.aFrom=o[0],this.aTo=o[1]),this.center=new Bu.Point(this.cx,this.cy),this.string=new Bu.Line(this.center.arcTo(this.radius,this.aFrom),this.center.arcTo(this.radius,this.aTo)),this.keyPoints=this.string.points}return a(i,t),i.prototype.clone=function(){return new Bu.Bow(this.cx,this.cy,this.radius,this.aFrom,this.aTo)},i.prototype._containsPoint=function(t){var i,n;return Bu.bevel(this.cx-t.x,this.cy-t.y)<this.radius?(i=this.string.isTwoPointsSameSide(this.center,t),n=this.aTo-this.aFrom<Math.PI,i^n):!1},i}(Bu.Object2D),Bu.Circle=function(t){function i(t,n,e){null==t&&(t=0),null==n&&(n=0),this._radius=null!=e?e:1,i.__super__.constructor.call(this),this.type="Circle",this._center=new Bu.Point(t,n),this.bounds=null,this.keyPoints=[this._center]}return a(i,t),i.prototype.clone=function(){return new Bu.Circle(this.cx,this.cy,this.radius)},i.property("cx",{get:function(){return this._center.x},set:function(t){return this._center.x=t,this.trigger("centerChanged",this)}}),i.property("cy",{get:function(){return this._center.y},set:function(t){return this._center.y=t,this.trigger("centerChanged",this)}}),i.property("center",{get:function(){return this._center},set:function(t){return this._center=t,this.cx=t.x,this.cy=t.y,this.keyPoints[0]=t,this.trigger("centerChanged",this)}}),i.property("radius",{get:function(){return this._radius},set:function(t){return this._radius=t,this.trigger("radiusChanged",this),this}}),i.prototype._containsPoint=function(t){var i,n;return i=t.x-this.cx,n=t.y-this.cy,Bu.bevel(i,n)<this.radius},i}(Bu.Object2D),Bu.Fan=function(t){function i(t,n,e,s,r){this.cx=t,this.cy=n,this.radius=e,this.aFrom=s,this.aTo=r,i.__super__.constructor.call(this),this.type="Fan",this.center=new Bu.Point(this.cx,this.cy),this.string=new Bu.Line(this.center.arcTo(this.radius,this.aFrom),this.center.arcTo(this.radius,this.aTo)),this.keyPoints=[this.string.points[0],this.string.points[1],new Bu.Point(this.cx,this.cy)]}return a(i,t),i.prototype.clone=function(){return new Bu.Fan(this.cx,this.cy,this.radius,this.aFrom,this.aTo)},i.prototype._containsPoint=function(t){var i,n,e;for(n=t.x-this.cx,e=t.y-this.cy,i=Math.atan2(t.y-this.cy,t.x-this.cx);i<this.aFrom;)i+=2*Math.PI;return Bu.bevel(n,e)<this.radius&&i>this.aFrom&&i<this.aTo},i}(Bu.Object2D),Bu.Line=function(t){function i(t,n,e,s){i.__super__.constructor.call(this),this.type="Line",arguments.length<2?this.points=[new Bu.Point,new Bu.Point]:arguments.length<4?this.points=[t.clone(),n.clone()]:this.points=[new Bu.Point(t,n),new Bu.Point(e,s)],this.length,this.midpoint=new Bu.Point,this.keyPoints=this.points,this.on("pointChange",function(t){return function(i){return t.length=t.points[0].distanceTo(t.points[1]),t.midpoint.set((t.points[0].x+t.points[1].x)/2,(t.points[0].y+t.points[1].y)/2)}}(this)),this.trigger("pointChange",this)}return a(i,t),i.prototype.clone=function(){return new Bu.Line(this.points[0],this.points[1])},i.prototype.set=function(t,i,n,e){return"undefined"!=typeof p4&&null!==p4?(this.points[0].set(t,i),this.points[1].set(n,e)):(this.points[0]=t,this.points[1]=i),this.trigger("pointChange",this),this},i.prototype.setPoint1=function(t,i){return null!=i?this.points[0].set(t,i):this.points[0].copy(t),this.trigger("pointChange",this),this},i.prototype.setPoint2=function(t,i){return null!=i?this.points[1].set(t,i):this.points[1].copy(t),this.trigger("pointChange",this),this},i.prototype.isTwoPointsSameSide=function(t,i){var n,e,s,r;return n=this.points[0],e=this.points[1],n.x===e.x?(t.x-n.x)*(i.x-n.x)>0:(s=(n.y-e.y)*(t.x-n.x)/(n.x-e.x)+n.y,r=(n.y-e.y)*(i.x-n.x)/(n.x-e.x)+n.y,(t.y-s)*(i.y-r)>0)},i.prototype.distanceTo=function(t){var i,n,e,s;return e=this.points[0],s=this.points[1],i=(e.y-s.y)/(e.x-s.x),n=e.y-i*e.x,Math.abs(i*t.x+n-t.y)/Math.sqrt(i*i+1)},i.prototype.distanceTo2=function(t){var i,n,e,s,r,o;return r=this.points[0],o=this.points[1],i=(r.y-o.y)/(r.x-o.x),n=r.y-(r.y-o.y)*r.x/(r.x-o.x),e=(t.y+t.x/i-n)/(i+1/i),s=i*e+n,Bu.bevel(e-t.x,s-t.y)},i.prototype.footPointFrom=function(t,i){var n,e,s,r,o,h,u;return r=this.points[0],o=this.points[1],n=(r.y-o.y)/(r.x-o.x),e=r.y-n*r.x,s=t.x+n*t.y,h=(s-n*e)/(n*n+1),u=n*h+e,null!=i?i.set(h,u):new Bu.Point(h,u)},i.prototype.getCrossPointWith=function(t){var i,n,e,s,r,o,h,u,a,c,l;return u=this.points[0],a=this.points[1],c=t.points[0],l=t.points[1],i=a.y-u.y,e=u.x-a.x,r=i*u.x+e*u.y,n=l.y-c.y,s=c.x-l.x,o=n*c.x+s*c.y,h=i*s-n*e,new Bu.Point((s*r-e*o)/h,(i*o-n*r)/h)},i.prototype.isCrossWithLine=function(t){var i,n,e,s,r,o,h,u,a,c,l;return e=this.points[0].x,u=this.points[0].y,s=this.points[1].x,a=this.points[1].y,r=t.points[0].x,c=t.points[0].y,o=t.points[1].x,l=t.points[1].y,i=(a-u)*(o-r)-(l-c)*(s-e),0===i?!1:(n=((s-e)*(o-r)*(c-u)+(a-u)*(o-r)*e-(l-c)*(s-e)*r)/i,h=((a-u)*(l-c)*(r-e)+(s-e)*(l-c)*u-(o-r)*(a-u)*c)/-i,0>(n-e)*(n-s)&&0>(n-r)*(n-o)&&0>(h-u)*(h-a)&&0>(h-c)*(h-l))},i.prototype.isCrossWithLine2=function(t){var i,n,e,s,r,o,h,u,a,c;return r=this.points[0],o=this.points[1],h=t.points[0],u=t.points[1],e=o.x-r.x,s=o.y-r.y,i=u.x-h.x,n=u.y-h.y,i*s-n*e===0?!1:(a=(e*(h.y-r.y)+s*(r.x-h.x))/(i*s-n*e),c=(i*(r.y-h.y)+n*(h.x-r.x))/(n*e-i*s),a>=0&&1>=a&&c>=0&&1>=c)},i}(Bu.Object2D),Bu.Point=function(t){function i(t,n){this.x=null!=t?t:0,this.y=null!=n?n:0,i.__super__.constructor.call(this),this.type="Point",this.lineWidth=.5,this._labelIndex=-1}var n;return a(i,t),i.prototype.clone=function(){return new Bu.Point(this.x,this.y)},i.property("label",{get:function(){return this._labelIndex>-1?this.children[this._labelIndex].text:""},set:function(t){var i;return-1===this._labelIndex?(i=new Bu.PointText(t,this.x+Bu.POINT_LABEL_OFFSET,this.y,{align:"+0"}),this.children.push(i),this._labelIndex=this.children.length-1):this.children[this._labelIndex].text=t}}),i.prototype.arcTo=function(t,i){return new Bu.Point(this.x+Math.cos(i)*t,this.y+Math.sin(i)*t)},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.updateLabel()},i.prototype.set=function(t,i){return this.x=t,this.y=i,this.updateLabel()},i.prototype.updateLabel=function(){return this._labelIndex>-1?(this.children[this._labelIndex].x=this.x+Bu.POINT_LABEL_OFFSET,this.children[this._labelIndex].y=this.y):void 0},i.prototype.distanceTo=function(t){return Bu.bevel(this.x-t.x,this.y-t.y)},n=null,i.prototype.isNear=function(t,i){var e,s,r,o,h,u,a;switch(null==i&&(i=Bu.DEFAULT_NEAR_DIST),t.type){case"Point":return this.distanceTo(t)<i;case"Line":return a=t.distanceTo(this),null==n&&(n=new Bu.Point),t.footPointFrom(this,n),e=n.distanceTo(t.points[0])<t.length+Bu.DEFAULT_NEAR_DIST,s=n.distanceTo(t.points[1])<t.length+Bu.DEFAULT_NEAR_DIST,i>a&&e&&s;case"Polyline":for(u=t.lines,r=0,o=u.length;o>r;r++)if(h=u[r],this.isNear(h))return!0;return!1}},i}(Bu.Object2D),Bu.Point.interpolate=function(t,i,n,e){var s,r;return s=t.x+(i.x-t.x)*n,r=t.y+(i.y-t.y)*n,null!=e?e.set(s,r):new Bu.Point(s,r)},Bu.Polygon=function(t){function i(t){var n,e,s,r,o,h,u,a,c,l;if(i.__super__.constructor.call(this),this.type="Polygon",this.vertices=[],this.lines=[],this.triangles=[],o=Bu.combineOptions(arguments,{angle:0}),t instanceof Array?null!=t&&(this.vertices=t):(arguments.length<4?(c=0,l=0,h=arguments[0],s=arguments[1]):(c=arguments[0],l=arguments[1],h=arguments[2],s=arguments[3]),this.vertices=Bu.Polygon.generateRegularPoints(c,l,h,s,o)),this.vertices.length>1){for(n=e=0,u=this.vertices.length-1;u>=0?u>e:e>u;n=u>=0?++e:--e)this.lines.push(new Bu.Line(this.vertices[n],this.vertices[n+1]));this.lines.push(new Bu.Line(this.vertices[this.vertices.length-1],this.vertices[0]))}if(this.vertices.length>2)for(n=r=1,a=this.vertices.length-1;a>=1?a>r:r>a;n=a>=1?++r:--r)this.triangles.push(new Bu.Triangle(this.vertices[0],this.vertices[n],this.vertices[n+1]));this.keyPoints=this.vertices}return a(i,t),i.prototype.clone=function(){return new Bu.Polygon(this.vertices)},i.prototype.isSimple=function(){var t,i,n,e,s,r,o,h;for(e=this.lines.length,t=n=0,r=e;r>=0?r>n:n>r;t=r>=0?++n:--n)for(i=s=o=t+1,h=e;h>=o?h>s:s>h;i=h>=o?++s:--s)if(this.lines[t].isCrossWithLine(this.lines[i]))return!1;return!0},i.prototype.addPoint=function(t,i){return null!=i?this.vertices.splice(i,0,t):(this.vertices.push(t),this.vertices.length>1&&(this.lines[this.lines.length-1].points[1]=t),this.vertices.length>0&&this.lines.push(new Bu.Line(this.vertices[this.vertices.length-1],this.vertices[0])),this.vertices.length>2?this.triangles.push(new Bu.Triangle(this.vertices[0],this.vertices[this.vertices.length-2],this.vertices[this.vertices.length-1])):void 0)},i.prototype._containsPoint=function(t){var i,n,e,s;for(e=this.triangles,i=0,n=e.length;n>i;i++)if(s=e[i],s.containsPoint(t))return!0;return!1},i.generateRegularPoints=function(t,i,n,e,s){var r,o,h,u,a,c,l,p,f,y;for(o=s.angle,l=n,c=[],h=2*Math.PI/e,u=a=0,p=e;p>=0?p>a:a>p;u=p>=0?++a:--a)r=u*h+o,f=t+l*Math.cos(r),y=i+l*Math.sin(r),c[u]=new Bu.Point(f,y);return c},i}(Bu.Object2D),Bu.Polyline=function(t){function i(t){var n,e,s,r;if(this.vertices=null!=t?t:[],this.calcLength=u(this.calcLength,this),this.updateLines=u(this.updateLines,this),this.clone=u(this.clone,this),i.__super__.constructor.call(this),this.type="Polyline",arguments.length>1){for(r=[],n=e=0,s=arguments.length/2;s>=0?s>e:e>s;n=s>=0?++e:--e)r.push(new Bu.Point(arguments[2*n],arguments[2*n+1]));this.vertices=r}this.lines=[],this.length=0,this.pointNormalizedPos=[],this.keyPoints=this.vertices,this.fill(!1),this.on("pointChange",function(t){return function(){return t.vertices.length>1?(t.updateLines(),t.calcLength(),t.calcPointNormalizedPos()):void 0}}(this)),this.trigger("pointChange",this)}var n;return a(i,t),i.prototype.clone=function(){return new Bu.Polyline(this.vertices)},i.prototype.updateLines=function(){var t,i,n,e;for(e=[],t=i=0,n=this.vertices.length-1;n>=0?n>i:i>n;t=n>=0?++i:--i)null!=this.lines[t]?e.push(this.lines[t].set(this.vertices[t],this.vertices[t+1])):e.push(this.lines[t]=new Bu.Line(this.vertices[t],this.vertices[t+1]));return e},i.prototype.calcLength=function(){var t,i,n,e;if(this.vertices.length<2)return this.length=0;for(n=0,t=i=1,e=this.vertices.length;e>=1?e>i:i>e;t=e>=1?++i:--i)n+=this.vertices[t].distanceTo(this.vertices[t-1]);return this.length=n},i.prototype.calcPointNormalizedPos=function(){var t,i,n,e,s;for(t=0,this.pointNormalizedPos[0]=0,s=[],i=n=1,e=this.vertices.length;e>=1?e>n:n>e;i=e>=1?++n:--n)t+=this.vertices[i].distanceTo(this.vertices[i-1])/this.length,s.push(this.pointNormalizedPos[i]=t);return s},i.prototype.getNormalizedPos=function(t){return null!=t?this.pointNormalizedPos[t]:this.pointNormalizedPos},i.prototype.compress=function(t){var i,n,e,s,r,o,u,a;null==t&&(t=.8),i=[],u=this.vertices;for(n in u)h.call(u,n)&&(2>n?i[n]=this.vertices[n]:(a=i.slice(-2),s=a[0],o=a[1],r=this.vertices[n],e=Math.abs(Math.atan2(s.y-o.y,s.x-o.x)-Math.atan2(o.y-r.y,o.x-r.x)),e<t*t*Math.PI/2?i[i.length-1]=r:i.push(r)));return this.vertices=i,this.keyPoints=this.vertices,this},n=function(t){var i,n,e;for(i=n=0,e=this.vertices.length;e>=0?e>n:n>e;i=e>=0?++n:--n)this.vertices[i].copy(t[i]);return this.vertices.length>t.length&&this.vertices.splice(t.length),this.trigger("pointChange",this)},i.prototype.addPoint=function(t,i){return null==i?(this.vertices.push(t),this.vertices.length>1&&this.lines.push(new Bu.Line(this.vertices[this.vertices.length-2],this.vertices[this.vertices.length-1]))):this.vertices.splice(i,0,t),this.trigger("pointChange",this)},i}(Bu.Object2D),Bu.Rectangle=function(t){function i(t,n,e,s,r){null==r&&(r=0),i.__super__.constructor.call(this),this.type="Rectangle",this.position=new Bu.Point(t,n),this.center=new Bu.Point(t+e/2,n+s/2),this.size=new Bu.Size(e,s),this.pointRT=new Bu.Point(t+e,n),this.pointRB=new Bu.Point(t+e,n+s),this.pointLB=new Bu.Point(t,n+s),this.points=[this.position,this.pointRT,this.pointRB,this.pointLB],this.cornerRadius=r}return a(i,t),i.property("cornerRadius",{get:function(){return this._cornerRadius},set:function(t){return this._cornerRadius=t,this.keyPoints=t>0?[]:this.points}}),i.prototype.clone=function(){return new Bu.Rectangle(this.position.x,this.position.y,this.size.width,this.size.height)},i.prototype.containsPoint=function(t){return t.x>this.position.x&&t.y>this.position.y&&t.x<this.position.x+this.size.width&&t.y<this.position.y+this.size.height},i}(Bu.Object2D),Bu.Spline=function(t){function i(t){var e;i.__super__.constructor.call(this),this.type="Spline",t instanceof Bu.Polyline?(e=t,this.vertices=e.vertices,e.on("pointChange",function(t){return function(i){return t.vertices=i.vertices,n(t)}}(this))):this.vertices=Bu.clone(t),this.keyPoints=this.vertices,this.controlPointsAhead=[],this.controlPointsBehind=[],this.fill(!1),this.smoothFactor=Bu.DEFAULT_SPLINE_SMOOTH,this._smoother=!1,n(this)}var n;return a(i,t),i.property("smoother",{get:function(){return this._smoother},set:function(t){var i;return i=this._smoother,this._smoother=t,i!==this._smoother?n(this):void 0}}),i.prototype.clone=function(){return new Bu.Spline(this.vertices)},i.prototype.addPoint=function(t){return this.vertices.push(t),n(this)},n=function(t){var i,n,e,s,r,o,h,u,a,c,l,p,f,y,d;if(t.keyPoints=t.vertices,o=t.vertices,e=o.length,e>=1&&(t.controlPointsBehind[0]=o[0]),e>=2&&(t.controlPointsAhead[e-1]=o[e-1]),e>=3){for(u=[],i=n=1,h=e-1;h>=1?h>n:n>h;i=h>=1?++n:--n)c=Math.atan2(o[i].y-o[i-1].y,o[i].x-o[i-1].x),l=Math.atan2(o[i+1].y-o[i].y,o[i+1].x-o[i].x),s=Bu.bevel(o[i].y-o[i-1].y,o[i].x-o[i-1].x),r=Bu.bevel(o[i].y-o[i+1].y,o[i].x-o[i+1].x),a=c+(l-c)*(t._smoother?s/(s+r):.5),Math.abs(a-c)>Math.PI/2&&(a+=Math.PI),p=o[i].x-s*t.smoothFactor*Math.cos(a),y=o[i].y-s*t.smoothFactor*Math.sin(a),f=o[i].x+r*t.smoothFactor*Math.cos(a),d=o[i].y+r*t.smoothFactor*Math.sin(a),t.controlPointsAhead[i]=new Bu.Point(p,y),u.push(t.controlPointsBehind[i]=new Bu.Point(f,d));return u}},i}(Bu.Object2D),Bu.Triangle=function(t){function i(t,n,e){this.clone=u(this.clone,this);var s,r,o,h,a,c;i.__super__.constructor.call(this),this.type="Triangle",6===arguments.length&&(s=arguments[0],h=arguments[1],r=arguments[2],a=arguments[3],o=arguments[4],c=arguments[5],t=new Bu.Point(s,h),n=new Bu.Point(r,a),e=new Bu.Point(o,c)),this.lines=[new Bu.Line(t,n),new Bu.Line(n,e),new Bu.Line(e,t)],this.points=[t,n,e],this.keyPoints=this.points}return a(i,t),i.prototype.clone=function(){return new Bu.Triangle(this.points[0],this.points[1],this.points[2])},i.prototype.area=function(){var t,i,n,e;return e=this.points,t=e[0],i=e[1],n=e[2],Math.abs((i.x-t.x)*(n.y-t.y)-(n.x-t.x)*(i.y-t.y))/2;
},i.prototype._containsPoint=function(t){return this.lines[0].isTwoPointsSameSide(t,this.points[2])&&this.lines[1].isTwoPointsSameSide(t,this.points[0])&&this.lines[2].isTwoPointsSameSide(t,this.points[1])},i}(Bu.Object2D),Bu.Image=function(t){function i(t,n,e,s,r){this.url=t,null==n&&(n=0),null==e&&(e=0),i.__super__.constructor.call(this),this.type="Image",this.autoSize=!0,this.size=new Bu.Size(Bu.DEFAULT_IMAGE_SIZE,Bu.DEFAULT_IMAGE_SIZE),this.translate=new Bu.Vector(n,e),this.center=new Bu.Vector(n+s/2,e+r/2),null!=s&&(this.size.set(s,r),this.autoSize=!1),this.pivot=new Bu.Vector(.5,.5),this.image=new Bu.global.Image,this.loaded=!1,this.image.onload=function(t){return function(i){return t.autoSize&&t.size.set(t.image.width,t.image.height),t.loaded=!0}}(this),this.image.src=this.url}return a(i,t),i}(Bu.Object2D),Bu.PointText=function(t){function i(t,n,e){var s;this.text=t,this.x=null!=n?n:0,this.y=null!=e?e:0,this.setContextAlign=u(this.setContextAlign,this),i.__super__.constructor.call(this),this.type="PointText",this.strokeStyle=null,this.fillStyle=Bu.DEFAULT_TEXT_FILL_STYLE,s=Bu.combineOptions(arguments,{align:"00",fontFamily:"Verdana",fontSize:11}),this.align=s.align,this._fontFamily=s.fontFamily,this._fontSize=s.fontSize,this.font=this._fontSize+"px "+this._fontFamily||s.font,this.setContextAlign(this.align)}return a(i,t),i.property("fontFamily",{get:function(){return this._fontFamily},set:function(t){return this._fontFamily=t,this.font=this._fontSize+"px "+this._fontFamily}}),i.property("fontSize",{get:function(){return this._fontSize},set:function(t){return this._fontSize=t,this.font=this._fontSize+"px "+this._fontFamily}}),i.prototype.setContextAlign=function(t){var i,n;return 1===t.length&&(t=""+t+t),i=t.substring(0,1),n=t.substring(1,2),this.textAlign=function(){switch(i){case"-":return"right";case"0":return"center";case"+":return"left"}}(),this.textBaseline=function(){switch(n){case"-":return"bottom";case"0":return"middle";case"+":return"top"}}()},i}(Bu.Object2D),Bu.Animation=function(){function t(t){this.from=t.from,this.to=t.to,this.data=t.data||{},this.duration=t.duration||.5,this.repeat=null!=t.repeat?t.repeat:!1,this.init=t.init,this.update=t.update,this.finish=t.finish}return t.prototype.apply=function(t,i){return Bu.animationRunner.add(this,t,i)},t}(),Bu.animations={fadeIn:new Bu.Animation({update:function(t){return this.opacity=t}}),fadeOut:new Bu.Animation({update:function(t){return this.opacity=1-t}}),spin:new Bu.Animation({update:function(t){return this.rotation=t*Math.PI*2}}),spinIn:new Bu.Animation({init:function(t,i){return null==i&&(i=1),t.data.ds=i},update:function(t,i){return this.opacity=t,this.rotation=t*Math.PI*4,this.scale=t*i.ds}}),spinOut:new Bu.Animation({update:function(t){return this.opacity=1-t,this.rotation=t*Math.PI*4,this.scale=1-t}}),blink:new Bu.Animation({duration:.2,from:0,to:512,update:function(t){return t=Math.floor(Math.abs(d-256)),this.fillStyle="rgb("+t+", "+t+", "+t+")"}}),shake:new Bu.Animation({init:function(t,i){return t.data.ox=this.translate.x,t.data.range=i||20},update:function(t,i){return this.translate.x=Math.sin(t*Math.PI*8)*i.range+i.ox}}),puff:new Bu.Animation({duration:.15,init:function(t){return t.from={opacity:this.opacity,scale:this.scale.x},t.to={opacity:1===this.opacity?0:1,scale:1===this.opacity?1.5*this.scale.x:this.scale.x/1.5}},update:function(t){return this.opacity=t.opacity,this.scale=t.scale}}),clip:new Bu.Animation({init:function(t){return 0!==this.scale.y?(t.from=this.scale.y,t.to=0):(t.from=this.scale.y,t.to=this.scale.x)},update:function(t){return this.scale.y=t}}),flipX:new Bu.Animation({init:function(t){return t.from=this.scale.x,t.to=-t.from},update:function(t){return this.scale.x=t}}),flipY:new Bu.Animation({init:function(t){return t.from=this.scale.y,t.to=-t.from},update:function(t){return this.scale.y=t}}),moveTo:new Bu.Animation({init:function(t,i){return null!=i?(t.from=this.translate.x,t.to=i):console.error("animation moveTo need an argument")},update:function(t){return this.translate.x=t}}),moveBy:new Bu.Animation({init:function(t,i){return null!=i?(t.from=this.translate.x,t.to=this.translate.x+parseFloat(i)):console.error("animation moveTo need an argument")},update:function(t){return this.translate.x=t}})},Bu.AnimationRunner=function(){function t(){this.runningAnimations=[]}return t.prototype.add=function(t,i,n){var e;return this.runningAnimations.push({animation:t,target:i,startTime:Bu.now(),current:t.data,finished:!1}),null!=(e=t.init)?e.call(i,t,n):void 0},t.prototype.update=function(){var t,i,n,e,s,r,o,u,a,c,l,p;for(r=Bu.now(),o=this.runningAnimations,c=[],e=0,s=o.length;s>e;e++)if(p=o[e],!p.finished){if(t=p.animation,l=(r-p.startTime)/(1e3*t.duration),l>1&&(i=!0,t.repeat?(l=0,p.startTime=Bu.now()):(l=1,p.finished=!0)),null!=t.from){if(t.from instanceof Object){u=t.from;for(n in u)h.call(u,n)&&n in t.to&&(p.current[n]=t.to[n]*l-t.from[n]*(l-1))}else p.current=t.to*l-t.from*(l-1);t.update.apply(p.target,[p.current,l])}else t.update.apply(p.target,[l,p.current]);i?c.push(null!=(a=t.finish)?a.call(p.target,t):void 0):c.push(void 0)}return c},t.prototype.hookUp=function(t){return t.on("update",function(t){return function(){return t.update()}}(this))},t}(),Bu.animationRunner=new Bu.AnimationRunner,Bu.RandomShapeGenerator=function(){function t(t){this.bu=t}var i;return i=30,t.prototype.randomX=function(){return Bu.rand(i,this.bu.width-2*i)},t.prototype.randomY=function(){return Bu.rand(i,this.bu.height-2*i)},t.prototype.randomRadius=function(){return Bu.rand(5,Math.min(this.bu.width,this.bu.height)/2)},t.prototype.generate=function(t){switch(t){case"circle":return this.generateCircle();case"bow":return this.generateBow();case"triangle":return this.generateTriangle();case"rectangle":return this.generateRectangle();case"fan":return this.generateFan();case"polygon":return this.generatePolygon();case"line":return this.generateLine();case"polyline":return this.generatePolyline();default:return console.warn("not support shape: "+t)}},t.prototype.generateCircle=function(){var t;return t=new Bu.Circle(this.randomX(),this.randomY(),this.randomRadius()),t.center.label="O",t},t.prototype.generateBow=function(){var t,i,n;return t=Bu.rand(2*Math.PI),i=t+Bu.rand(Math.PI/2,2*Math.PI),n=new Bu.Bow(this.randomX(),this.randomY(),this.randomRadius(),t,i),n.string.points[0].label="A",n.string.points[1].label="B",n},t.prototype.generateTriangle=function(){var t,i,n,e;for(n=[],t=i=0;2>=i;t=++i)n[t]=new Bu.Point(this.randomX(),this.randomY());return e=new Bu.Triangle(n[0],n[1],n[2]),e.points[0].label="A",e.points[1].label="B",e.points[2].label="C",e},t.prototype.generateRectangle=function(){return new Bu.Rectangle(Bu.rand(this.bu.width),Bu.rand(this.bu.height),Bu.rand(this.bu.width/2),Bu.rand(this.bu.height/2))},t.prototype.generateFan=function(){var t,i,n;return t=Bu.rand(2*Math.PI),i=t+Bu.rand(Math.PI/2,2*Math.PI),n=new Bu.Fan(this.randomX(),this.randomY(),this.randomRadius(),t,i),n.string.points[0].label="A",n.string.points[1].label="B",n},t.prototype.generatePolygon=function(){var t,i,n,e;for(e=[],t=i=0;3>=i;t=++i)n=new Bu.Point(this.randomX(),this.randomY()),n.label="P"+t,e.push(n);return new Bu.Polygon(e)},t.prototype.generateLine=function(){var t;return t=new Bu.Line(this.randomX(),this.randomY(),this.randomX(),this.randomY()),t.points[0].label="A",t.points[1].label="B",t},t.prototype.generatePolyline=function(){var t,i,n,e;for(e=new Bu.Polyline,t=i=0;3>=i;t=++i)n=new Bu.Point(this.randomX(),this.randomY()),n.label="P"+t,e.addPoint(n);return e},t}()}).call(this);