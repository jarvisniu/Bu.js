<!DOCTYPE html>
<html lang="en">
<head>
	<title>Morph</title>
	<meta charset="utf-8">
	<script src="../../lib/Za.dev.js"></script>
	<script src="../../src/Geom2D.dev.js"></script>
	<script type="text/javascript">

var renderer;
var polylineA, polylineB;
var polylineMorph;

var time = 0;

function init() {

    renderer = new Geom2D.Renderer();
    document.body.appendChild(renderer.dom);
    renderer.dom.addEventListener("mousedown", onMouseDown);

    polylineA = new Geom2D.Polyline();
    polylineA.addPoint(new Geom2D.Point(100, 300));
    polylineA.addPoint(new Geom2D.Point(250, 100));
    polylineA.addPoint(new Geom2D.Point(400, 300));

    polylineB = new Geom2D.Polyline();
    polylineB.strokeStyle = "blue";
    polylineB.addPoint(new Geom2D.Point(100, 400));
    polylineB.addPoint(new Geom2D.Point(400, 400));

    polylineMorph = new Geom2D.PolylineMorph(polylineA, polylineB);
    polylineMorph.polyline.strokeStyle = "purple";

    renderer.append(polylineA);
    renderer.append(polylineB);
    renderer.append(polylineMorph.polyline);

    setInterval(animate, 1000 / 60);

}
document.addEventListener("DOMContentLoaded", init);

function onMouseDown(e) {

    if (e.button == 0) {
        polylineA.addPoint(new Geom2D.Point(e.offsetX, e.offsetY));
    } else {
        polylineB.addPoint(new Geom2D.Point(e.offsetX, e.offsetY));
    }
    polylineMorph.update();

}

function animate() {

    if (time < 1)
        time += 0.01;
    else
        time = 0;

    polylineMorph.setTime(time);

}

	</script>
</head>
<body>
	<div> Click (left button to red, right button to blue) to add points to the lines. </div>
</body>
</html>